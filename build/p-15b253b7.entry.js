import{r,h as t}from"./p-aff91b47.js";import{M as e,p as s,e as a,s as i}from"./p-83da1e09.js";import"./p-e497ad6d.js";const o=class{constructor(s){r(this,s),this.maxLength=e,this.restoreEmpty=(r,t,e)=>0===r.trim().length?`${t}${r}${t}`:e(r),this.renderLink=r=>t("a",{class:"link",href:r,target:"_blank",rel:"noopener noreferrer"},r),this.renderBold=r=>"string"==typeof r?this.restoreEmpty(r,"*",(r=>t("b",null,r))):t("b",null,this.renderTokens(r)),this.renderItalic=r=>"string"==typeof r?this.restoreEmpty(r,"_",(r=>t("i",null,r))):t("i",null,this.renderTokens(r)),this.renderStrikethrough=r=>"string"==typeof r?this.restoreEmpty(r,"~",(r=>t("s",null,r))):t("b",null,this.renderTokens(r)),this.renderPlainText=r=>"string"==typeof r?r:t("p",null,this.renderTokens(r)),this.renderTokens=r=>r.map((r=>{switch(r.type){case"a":if("string"==typeof r.content)return this.renderLink(r.content);case"b":return this.renderBold(r.content);case"i":return this.renderItalic(r.content);case"s":return this.renderStrikethrough(r.content);case"q":return t("span",{class:"block-quote"});default:return this.renderPlainText(r.content)}}))}renderMessage(r){let e=r.split("\n"),a=!1;"```"===e[0]&&"```"===e[e.length-1]&&(a=!0,e=e.slice(1,-1));const i=e.map((r=>{const e=s(r);return t("p",null,this.renderTokens(e))}));return a?t("pre",{style:{whiteSpace:"pre",overflow:"scroll"}},e.join("\n")):i}render(){const r=this.text.slice(0,this.maxLength),e=a(r,!0),s=i(r);return t("p",{key:"b3115390fc6d21369673cb6c92ba90b7a710173a"},0!==e.length&&t("blockquote",{key:"5aa48ffc60bb71da150b161582b9ab1b1ee59ff7"},this.renderMessage(e)),0!==s.length&&this.renderMessage(s))}};o.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{overflow-wrap:break-word}a{color:currentColor}.block-quote,blockquote{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px);--tw-border-spacing-x:1px;--tw-border-spacing-y:1px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-md, 2px);border-right-width:var(--dyte-border-width-none, 0);border-style:solid;padding:var(--dyte-space-0\\.5, 2px);padding-left:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);border-top-left-radius:var(--dyte-border-radius-none, 0);border-bottom-left-radius:var(--dyte-border-radius-none, 0)}pre{white-space:pre-wrap}";export{o as dyte_markdown_view}