import{r as t,w as e,h as i,H as a,c as r}from"./p-aff91b47.js";import{a as o,c as s,d as n}from"./p-8e40fcf4.js";import{S as d}from"./p-961bba4b.js";import{f as c,s as l}from"./p-338c7261.js";var p=function(t,e,i,a){var r,o=arguments.length,s=o<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,a);else for(var n=t.length-1;n>=0;n--)(r=t[n])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};const h=class{constructor(e){t(this,e),this.iconPack=o,this.t=s(),this.canClosePlugin=!1,this.viewModeEnabled=!1,this.onIframeRef=t=>{var e;t!==this.iframeEl&&(this.iframeEl=t,null===(e=this.plugin)||void 0===e||e.addPluginView(t,"plugin-main"))},this.canInteractWithPlugin=()=>{const t=this.plugin.id;if(!t)return!0;const e=this.meeting.self.permissions.plugins.config[t];return!e||!e.accessControl||"FULL_ACCESS"===e.accessControl}}componentDidLoad(){this.meetingChanged(this.meeting),this.pluginChanged(this.plugin)}meetingChanged(t){if(null==t)return;const i=this.canInteractWithPlugin();this.viewModeEnabled=!i,e((()=>{this.canClosePlugin=t.self.permissions.plugins.canClose||this.plugin.enabledBy===t.self.id}))}pluginChanged(t){this.toggleViewModeListener=t=>{this.canInteractWithPlugin()||(this.viewModeEnabled=t)},null!=t&&(this.iframeEl&&t.addPluginView(this.iframeEl,"plugin-main"),t.addListener("toggleViewMode",this.toggleViewModeListener))}disconnectedCallback(){var t,e;null===(t=this.plugin)||void 0===t||t.removePluginView("plugin-main"),null===(e=this.plugin)||void 0===e||e.removeListener("toggleViewMode",this.toggleViewModeListener)}render(){return null==this.plugin?null:i(a,null,i("header",{part:"header"},i("div",null,this.plugin.name),this.canClosePlugin&&i("div",null,i("dyte-button",{kind:"icon",onClick:()=>this.plugin.deactivate(),part:"button"},i("dyte-icon",{icon:this.iconPack.dismiss})))),i("div",{class:"iframe-container"},!this.canInteractWithPlugin()&&this.viewModeEnabled?i("div",{class:"block-inputs"}):null,i("iframe",{ref:t=>this.onIframeRef(t),part:"iframe"})))}static get watchers(){return{meeting:["meetingChanged"],plugin:["pluginChanged"]}}};p([d()],h.prototype,"meeting",void 0),p([d()],h.prototype,"iconPack",void 0),p([d()],h.prototype,"t",void 0),h.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}header>div{display:flex;align-items:center}dyte-button{display:flex;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-direction:column;align-items:center;border-radius:9999px}dyte-button dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}iframe{display:block;flex:1 1 0%;margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-0, 0px);outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}.iframe-container{position:relative;height:100%;width:100%}.block-inputs{position:absolute;z-index:10;height:100%;width:100%;border-left-width:var(--dyte-border-width-none, 0);border-top-width:var(--dyte-border-width-lg, 4px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}iframe{height:100%;width:100%}";var y=function(t,e,i,a){var r,o=arguments.length,s=o<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,a);else for(var n=t.length-1;n>=0;n--)(r=t[n])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};const v=class{constructor(e){t(this,e),this.tabChange=r(this,"tabChange",7),this.config=n,this.layout="row",this.iconPack=o,this.t=s(),this.tabs=[]}render(){return i(a,{key:"8bdec657a4b6635cc2d3d73e79b4be08db404cb9"},i("dyte-spotlight-indicator",{key:"958fa41423f075e8110d272ea521cbfc8aa67aa4",meeting:this.meeting,iconPack:this.iconPack,t:this.t,size:this.size}),this.tabs.map((t=>{var e,a,r,o,s;let n=!1;if(("plugin"===(null===(e=this.activeTab)||void 0===e?void 0:e.type)&&t.plugin&&(null===(a=this.activeTab)||void 0===a?void 0:a.plugin.id)===t.plugin.id||"screenshare"===(null===(r=this.activeTab)||void 0===r?void 0:r.type)&&t.participant&&(null===(o=this.activeTab)||void 0===o?void 0:o.participant.id)===t.participant.id)&&(n=!0),"screenshare"===t.type){const e=t.participant,a=c(e.name);return i("dyte-button",{title:`${a}'s Screen Share`,key:t.participant.id,kind:"icon",variant:n?"primary":"secondary",class:{tab:!0,active:n},onClick:()=>this.tabChange.emit(t)},i("div",{class:"center col"},i("dyte-icon",{icon:this.iconPack.share_screen_person}),i("span",{class:"name"},e.id===(null===(s=this.meeting)||void 0===s?void 0:s.self.id)?this.t("you"):l(a,6))))}if("plugin"===t.type){const e=t.plugin;return i("dyte-button",{title:e.name,key:e.id,kind:"icon",variant:n?"primary":"secondary",class:{tab:!0,active:n},onClick:()=>this.tabChange.emit(t)},i("div",{class:"center col"},i("img",{src:e.picture}),i("span",{class:"name"},l(e.name,6))))}})))}};y([d()],v.prototype,"size",void 0),y([d()],v.prototype,"meeting",void 0),y([d()],v.prototype,"states",void 0),y([d()],v.prototype,"iconPack",void 0),y([d()],v.prototype,"t",void 0),v.style=".scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column;gap:var(--dyte-space-2, 8px);overflow-y:auto;font-family:var(--dyte-font-family, sans-serif)}dyte-button{z-index:10}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}.tab .name{margin-top:var(--dyte-space-0\\.5, 2px)}:host([size='sm']){flex-direction:column;margin-top:var(--dyte-space-4, 16px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-x:auto}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);text-overflow:clip;min-width:100px;height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:row;align-items:center;gap:var(--dyte-space-2, 8px)}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']) .tab .col .name{gap:var(--dyte-space-1, 4px)}:host([layout='column']){flex-direction:column}:host([layout='column']) .aside{flex:2;max-width:100%;width:100%}@media (orientation: portrait){:host([size='sm']){margin-top:var(--dyte-space-2, 8px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;transition:all 0.3s linear}:host([size='md']){height:var(--dyte-space-24, 96px);width:100%;flex-direction:row;transition:all 0.3s linear}:host .tab{margin:var(--dyte-space-0, 0px)}}@media (orientation: landscape){:host([size='sm']){margin-right:var(--dyte-space-4, 16px);height:100%;width:var(--dyte-space-14, 56px);flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-y:auto;overflow-x:hidden;transition:all 0.3s linear}:host([size='md']){margin-right:var(--dyte-space-4, 16px);height:100%;width:var(--dyte-space-14, 56px);flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-y:auto;overflow-x:hidden;transition:all 0.3s linear}:host .tab{margin:var(--dyte-space-0, 0px)}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);width:100%;text-overflow:clip;min-width:0px;min-height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:column;align-items:center;gap:var(--dyte-space-2, 8px);font-size:10px}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}:host([size='sm']) .tab .col .name{gap:var(--dyte-space-1, 4px)}}";export{h as dyte_plugin_main,v as dyte_tab_bar}