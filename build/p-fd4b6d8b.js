import{h as e,H as t}from"./p-aff91b47.js";const r=({element:e,size:t,states:r={},config:s={}})=>{let o=[];const n=null==s?void 0:s.root[e],l=e=>{o.push(e),"string"==typeof t&&o.push(`${e}.${t}`)};if(l(e),"object"==typeof n&&!Array.isArray(n)&&null!==n){const{state:t,states:s}=n;let o=e,c=[];if(Array.isArray(s)){c=s.filter((e=>r[e])),c.sort();for(const e of c)l(`${o}.${e}`);c.length>1&&l([o,...c].join("."))}if("string"==typeof t){const s=`${e}[${t}=${r[t]}]`;l(s);for(const e of c)l(`${s}.${e}`);c.length>1&&l([s,...c].join("."))}}return o},s=({selectors:e,root:t})=>{if(!t||!Array.isArray(e))return[];let r=[];for(const s of e){const e=t[s];if(Array.isArray(e))r=[...e];else if(e){if(e.children&&(r=[...e.children]),Array.isArray(e.remove))for(const t of e.remove)r=r.filter((e=>"string"==typeof e?e!==t:!Array.isArray(e)||e[0]!==t));if(e.addBefore)for(const[t,s]of Object.entries(e.addBefore)){const e=r.findIndex((e=>"string"==typeof e?e===t:!!Array.isArray(e)&&e[0]===t));e>=0&&r.splice(e,0,...s)}Array.isArray(e.add)&&(r=r.concat(e.add)),Array.isArray(e.prepend)&&(r=e.prepend.concat(r))}}return r},o=({elements:t,defaults:r,props:s={},deepProps:o=!1,elementProps:n={}})=>Array.isArray(t)&&0!==t.length?t.map((t=>e(l,{element:t,defaults:r,props:s,childProps:o&&s,elementProps:n}))):null,n=({element:e,defaults:t,props:o={},elementProps:n={}})=>{var l;const{config:c,size:p,states:f}=t;let i,a={},u=[];Array.isArray(e)?[i,a,...u]=e:i=e;const y=null===(l=null==c?void 0:c.root)||void 0===l?void 0:l[i];null!=y&&"props"in y&&(o=Object.assign(Object.assign({},y.props),o)),o=Object.assign(Object.assign({},o),a),i in n&&(o=Object.assign(Object.assign({},o),n[i]));const d=r({element:i,size:p,states:f,config:c});return s({selectors:d,root:c.root}).length},l=({element:n,defaults:l,childProps:c={},props:p={},onlyChildren:f=!1,asHost:i=!1,deepProps:a=!1,elementProps:u={}},y)=>{var d;const{config:b,size:j,states:m}=l;let O,A={},P=[];Array.isArray(n)?[O,A,...P]=n:O=n;const g=null===(d=null==b?void 0:b.root)||void 0===d?void 0:d[O];null!=g&&"props"in g&&(p=Object.assign(Object.assign({},g.props),p)),p=Object.assign(Object.assign({},p),A),O in u&&(p=Object.assign(Object.assign({},p),u[O]));const v=r({element:O,size:j,states:m,config:b}),$=s({selectors:v,root:b.root});if(f)return e(o,{elements:$,defaults:l,props:c,deepProps:a,elementProps:u});const z=(({selectors:e,styles:t})=>{if(!Array.isArray(e)||null==t)return{};const r={};for(const s of e){const e=t[s];null!=e&&Object.assign(r,e)}return r})({selectors:v,styles:b.styles});if(i)return e(t,Object.assign({},l,{style:z},p),e(o,{elements:$,defaults:l,props:c,deepProps:a,elementProps:u}),y,P.map((t=>{if(Array.isArray(t)){const[r,s]=t;return e(r,Object.assign({},l,s))}return t})));if(["dyte-header","dyte-controlbar"].includes(O)&&(p.disableRender=!0),O.startsWith("dyte-"))return e(O,Object.assign({},l,{style:z},p),e(o,{elements:$,defaults:l,props:c,deepProps:a,elementProps:u}),y,P.map((t=>{if(Array.isArray(t)){const[r,s]=t;return e(r,Object.assign({},l,s))}return t})));{const[t,r]=O.split("#");return e(t,Object.assign({id:r,style:z},p),e(o,{elements:$,defaults:l,props:c,deepProps:a,elementProps:u}),y,P.map((t=>{if(Array.isArray(t)){const[r,s]=t;return e(r,Object.assign({},l,s))}return t})))}};export{l as R,n as l}