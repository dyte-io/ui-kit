import{r as t,h as s,a as i}from"./p-69f2ebde.js";import"./p-1210aa77.js";import"./p-26e8d50e.js";import{g as e,p as h}from"./p-12b24ac9.js";import{d as a}from"./p-ba748e25.js";import{g as r,a as o}from"./p-440091e0.js";import{u as n}from"./p-f9791180.js";import"./p-799d72ea.js";import"./p-57e22a58.js";import{d as p}from"./p-cadf534b.js";import"./p-aafa2ac8.js";import"./p-19c79157.js";import"./p-2c39bb8e.js";import"./p-63092db3.js";const c=class{constructor(s){t(this,s),this.meeting=void 0,this.size=void 0,this.config=a,this.t=n(),this.iconPackUrl=void 0,this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.joinRoom=!0,this.isReady=!1,this.iconPack=p}async iconPackUrlChanged(t){this.iconPack=await r(t)}async meetingChanged(t){var s;if(t){if(!t.self.roomJoined&&this.joinRoom&&(this.isReady=!1,await t.joinRoom(),this.isReady=!0),this.loadConfigFromPreset&&null!=t.self.config){const s=t.self.config,{config:i}=e(s,t);this.config===a&&(this.config=Object.assign(Object.assign(Object.assign({},a),i),{designTokens:Object.assign(Object.assign({},a.designTokens),i.designTokens)}))}this.applyDesignSystem&&null!=(null===(s=this.config)||void 0===s?void 0:s.designTokens)&&"undefined"!=typeof document&&h(document.documentElement,this.config.designTokens),Array.from(this.hostEl.children).filter((t=>t.tagName.startsWith("DYTE-"))).forEach((s=>{s.meeting=t,s.config=this.config,s.size=this.size,s.iconPack=this.iconPack,s.t=this.t}))}}connectedCallback(){this.resizeObserver=new ResizeObserver((()=>this.handleResize())),this.resizeObserver.observe(this.hostEl),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl)}handleResize(){this.size=o(this.hostEl.clientWidth)}render(){return this.isReady?s("slot",null):null}get hostEl(){return i(this)}static get watchers(){return{iconPackUrl:["iconPackUrlChanged"],meeting:["meetingChanged"]}}};export{c as dyte_ui_provider}