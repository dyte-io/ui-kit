import{r as t,h as i,H as a}from"./p-aff91b47.js";import{a as r,c as e}from"./p-8e40fcf4.js";import{S as o}from"./p-961bba4b.js";import{d as s}from"./p-cbdd7a99.js";var n=function(t,i,a,r){var e,o=arguments.length,s=o<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,i,a,r);else for(var n=t.length-1;n>=0;n--)(e=t[n])&&(s=(o<3?e(s):o>3?e(i,a,s):e(i,a))||s);return o>3&&s&&Object.defineProperty(i,a,s),s};const d=class{constructor(i){t(this,i),this.variant="rounded",this.iconPack=r,this.t=e(),this.page=1,this.pageCount=0,this.activeCount=0,this.activeComputedCount=0,this.showPagination=!1,this.onPageChanged=({currentPage:t,pageCount:i})=>{this.pageCount=i,this.page=t},this.toggleGridPagination=s((()=>{var t;const{self:i,participants:a}=this.meeting,{mobile:r,desktop:e}=null===(t=i.config)||void 0===t?void 0:t.maxVideoStreams,o="sm"===this.size?r:e,s=a.joined.toArray().filter((t=>"ON_STAGE"===t.stageStatus)).length;this.showPagination=!(s<o)}),50),this.onParticipantJoin=s((()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()}),50),this.onParticipantLeave=s((()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()}),50),this.onStateStatusUpdate=s((()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()}),50),this.prevPage=()=>{if(null==this.meeting)return;const{participants:t}=this.meeting;this.page>1?t.setPage(this.page-=1):"PAGINATED"===t.viewMode&&t.setViewMode("ACTIVE_GRID")},this.nextPage=()=>{if(null==this.meeting)return;const{participants:t}=this.meeting;this.page>0&&this.page<this.pageCount?t.setPage(this.page+=1):t.count>0&&0===this.pageCount&&t.setViewMode("PAGINATED")}}connectedCallback(){this.meetingChanged(this.meeting),this.sizeChanged()}disconnectedCallback(){if(null==this.meeting)return;const{participants:t,stage:i}=this.meeting;t.removeListener("pageChanged",this.onPageChanged),t.removeListener("viewModeChanged",this.onPageChanged),t.joined.removeListener("participantJoined",this.onParticipantJoin),t.joined.removeListener("participantLeft",this.onParticipantLeave),t.joined.removeListener("stageStatusUpdate",this.onStateStatusUpdate),i.removeListener("stageStatusUpdate",this.onStateStatusUpdate)}meetingChanged(t){if(null!=t){const{stage:i,participants:a}=t;this.page=a.currentPage,this.pageCount=a.pageCount,a.addListener("viewModeChanged",this.onPageChanged),a.addListener("pageChanged",this.onPageChanged),a.joined.addListener("participantJoined",this.onParticipantJoin),a.joined.addListener("participantLeft",this.onParticipantLeave),a.joined.addListener("stageStatusUpdate",this.onStateStatusUpdate),i.addListener("stageStatusUpdate",this.onStateStatusUpdate),this.activeCount=this.meeting.participants.joined.size,this.activeComputedCount=this.meeting.participants.joined.size,this.toggleGridPagination()}}sizeChanged(){this.toggleGridPagination()}render(){const{meta:t}=this.meeting;if("AUDIO_ROOM"!==(null==t?void 0:t.viewType)&&this.showPagination)return i(a,null,i("dyte-button",{class:"prev",variant:"secondary",kind:"icon",disabled:0===this.pageCount,onClick:this.prevPage,"aria-label":this.t("page.prev")},i("dyte-icon",{icon:this.iconPack.chevron_left})),"grid"!==this.variant&&i("div",{class:"center"},i("span",{class:"page"},0===this.pageCount?i("dyte-tooltip",{label:this.t("layout.auto")},i("dyte-button",{kind:"icon",class:"auto"},i("dyte-icon",{icon:this.iconPack.wand}))):this.page),0!==this.pageCount&&[i("span",{class:"slash"},"/"),i("span",{class:"pages"},this.pageCount)]),"grid"===this.variant&&this.pageCount>0&&i("div",{class:"dots"},[...Array(this.pageCount)].map(((t,a)=>i("div",{key:`dot-${a}`,class:{dot:!0,active:a+1===this.page}})))),i("dyte-button",{class:"next",variant:"secondary",kind:"icon",disabled:0!==this.page&&this.page===this.pageCount,onClick:this.nextPage,"aria-label":this.t("page.next")},i("dyte-icon",{icon:this.iconPack.chevron_right,tabIndex:-1,"aria-hidden":!0})))}static get watchers(){return{meeting:["meetingChanged"],size:["sizeChanged"]}}};n([o()],d.prototype,"meeting",void 0),n([o()],d.prototype,"states",void 0),n([o()],d.prototype,"size",void 0),n([o()],d.prototype,"iconPack",void 0),n([o()],d.prototype,"t",void 0),d.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:16px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}:host([size='sm']) .center{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([size='sm']) dyte-button{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) dyte-button dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}dyte-button{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.center{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.center .page{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.center .slash{margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px)}.center .pages{align-self:flex-end;font-size:12px}:host([variant='rounded']){overflow:hidden;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button{border-radius:9999px;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='rounded']) dyte-button:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button:not([disabled]):focus{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='grid']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) dyte-button{position:absolute;top:50%;height:var(--dyte-space-20, 80px);width:var(--dyte-space-20, 80px);opacity:0.2;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='grid']) dyte-button:hover{opacity:1}:host([variant='grid']) dyte-button{transform:translateY(-50%)}:host([variant='grid']) dyte-button.prev{left:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) dyte-button.next{right:var(--dyte-space-0, 0px);border-top-left-radius:9999px;border-bottom-left-radius:9999px}:host([variant='grid']) dyte-button.auto{left:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) .dots{position:absolute;left:50%;bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;transform:translateX(-50%)}:host([variant='grid']) .dots .dot{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);cursor:pointer;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([variant='grid']) .dots .dot:last-child{margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) .dots .dot.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host([variant='grid'][size='sm']) dyte-button{height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);opacity:0.1}";export{d as dyte_grid_pagination}