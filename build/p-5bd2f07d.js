function t(t){return t.split("-")[0]}function n(t){return t.split("-")[1]}function e(n){return["top","bottom"].includes(t(n))?"x":"y"}function o(t){return"y"===t?"height":"width"}function r(r,i,a){let{reference:l,floating:c}=r;const s=l.x+l.width/2-c.width/2,u=l.y+l.height/2-c.height/2,f=e(i),d=o(f),m=l[d]/2-c[d]/2,y="x"===f;let p;switch(t(i)){case"top":p={x:s,y:l.y-c.height};break;case"bottom":p={x:s,y:l.y+l.height};break;case"right":p={x:l.x+l.width,y:u};break;case"left":p={x:l.x-c.width,y:u};break;default:p={x:l.x,y:l.y}}switch(n(i)){case"start":p[f]-=m*(a&&y?-1:1);break;case"end":p[f]+=m*(a&&y?-1:1)}return p}function i(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function a(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function l(t,n){var e;void 0===n&&(n={});const{x:o,y:r,platform:l,rects:c,elements:s,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:y=!1,padding:p=0}=n,x=i(p),g=s[y?"floating"===m?"reference":"floating":m],h=a(await l.getClippingRect({element:null==(e=await(null==l.isElement?void 0:l.isElement(g)))||e?g:g.contextElement||await(null==l.getDocumentElement?void 0:l.getDocumentElement(s.floating)),boundary:f,rootBoundary:d,strategy:u})),w="floating"===m?{...c.floating,x:o,y:r}:c.reference,v=await(null==l.getOffsetParent?void 0:l.getOffsetParent(s.floating)),b=await(null==l.isElement?void 0:l.isElement(v))&&await(null==l.getScale?void 0:l.getScale(v))||{x:1,y:1},A=a(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:v,strategy:u}):w);return{top:(h.top-A.top+x.top)/b.y,bottom:(A.bottom-h.bottom+x.bottom)/b.y,left:(h.left-A.left+x.left)/b.x,right:(A.right-h.right+x.right)/b.x}}const c=Math.min,s=Math.max;function u(t,n,e){return s(t,c(n,e))}const f=t=>({name:"arrow",options:t,async fn(r){const{element:a,padding:l=0}=null!=t?t:{},{x:c,y:s,placement:f,rects:d,platform:m}=r;if(null==a)return{};const y=i(l),p={x:c,y:s},x=e(f),g=o(x),h=await m.getDimensions(a),w="y"===x?"top":"left",v="y"===x?"bottom":"right",b=d.reference[g]+d.reference[x]-p[x]-d.floating[g],A=p[x]-d.reference[x],k=await(null==m.getOffsetParent?void 0:m.getOffsetParent(a));let P=k?"y"===x?k.clientHeight||0:k.clientWidth||0:0;0===P&&(P=d.floating[g]);const R=y[w],B=P-h[g]-y[v],D=P/2-h[g]/2+(b/2-A/2),F=u(R,D,B),M=null!=n(f)&&D!=F&&d.reference[g]/2-(D<R?y[w]:y[v])-h[g]/2<0;return{[x]:p[x]-(M?D<R?R-D:B-D:0),data:{[x]:F,centerOffset:D-F}}}}),d={left:"right",right:"left",bottom:"top",top:"bottom"};function m(t){return t.replace(/left|right|bottom|top/g,(t=>d[t]))}function y(t,r,i){void 0===i&&(i=!1);const a=n(t),l=e(t),c=o(l);let s="x"===l?a===(i?"end":"start")?"right":"left":"start"===a?"bottom":"top";return r.reference[c]>r.floating[c]&&(s=m(s)),{main:s,cross:m(s)}}const p={start:"end",end:"start"};function x(t){return t.replace(/start|end/g,(t=>p[t]))}const g=["top","right","bottom","left"],h=g.reduce(((t,n)=>t.concat(n,n+"-start",n+"-end")),[]),w=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(o){var r,i,a,c,s;const{x:u,y:f,rects:d,middlewareData:m,placement:p,platform:g,elements:w}=o,{alignment:v,allowedPlacements:b=h,autoAlignment:A=!0,...k}=e,P=void 0!==v||b===h?function(e,o,r){return(e?[...r.filter((t=>n(t)===e)),...r.filter((t=>n(t)!==e))]:r.filter((n=>t(n)===n))).filter((t=>!e||n(t)===e||!!o&&x(t)!==t))}(v||null,A,b):b,R=await l(o,k),B=null!=(r=null==(i=m.autoPlacement)?void 0:i.index)?r:0,D=P[B];if(null==D)return{};const{main:F,cross:M}=y(D,d,await(null==g.isRTL?void 0:g.isRTL(w.floating)));if(p!==D)return{x:u,y:f,reset:{placement:P[0]}};const T=[R[t(D)],R[F],R[M]],C=[...null!=(a=null==(c=m.autoPlacement)?void 0:c.overflows)?a:[],{placement:D,overflows:T}],L=P[B+1];if(L)return{data:{index:B+1,overflows:C},reset:{placement:L}};const O=C.slice().sort(((t,n)=>t.overflows[0]-n.overflows[0])),S=null==(s=O.find((t=>{let{overflows:n}=t;return n.every((t=>t<=0))})))?void 0:s.placement,H=null!=S?S:O[0].placement;return H!==p?{data:{index:B+1,overflows:C},reset:{placement:H}}:{}}}},v=function(n){return void 0===n&&(n={}),{name:"flip",options:n,async fn(e){var o;const{placement:r,middlewareData:i,rects:a,initialPlacement:c,platform:s,elements:u}=e,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",flipAlignment:h=!0,...w}=n,v=t(r),b=[c,...p||(v!==c&&h?function(t){const n=m(t);return[x(t),n,x(n)]}(c):[m(c)])],A=await l(e,w),k=[];let P=(null==(o=i.flip)?void 0:o.overflows)||[];if(f&&k.push(A[v]),d){const{main:t,cross:n}=y(r,a,await(null==s.isRTL?void 0:s.isRTL(u.floating)));k.push(A[t],A[n])}if(P=[...P,{placement:r,overflows:k}],!k.every((t=>t<=0))){var R,B;const t=(null!=(R=null==(B=i.flip)?void 0:B.index)?R:0)+1,n=b[t];if(n)return{data:{index:t,overflows:P},reset:{placement:n}};let e="bottom";switch(g){case"bestFit":{var D;const t=null==(D=P.map((t=>[t,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])?void 0:D[0].placement;t&&(e=t);break}case"initialPlacement":e=c}if(r!==e)return{reset:{placement:e}}}return{}}}};function b(t,n){return{top:t.top-n.height,right:t.right-n.width,bottom:t.bottom-n.height,left:t.left-n.width}}function A(t){return g.some((n=>t[n]>=0))}const k=function(t){return void 0===t&&(t={}),{name:"hide",options:t,async fn(n){const{strategy:e="referenceHidden",...o}=t,{rects:r}=n;switch(e){case"referenceHidden":{const t=b(await l(n,{...o,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:A(t)}}}case"escaped":{const t=b(await l(n,{...o,altBoundary:!0}),r.floating);return{data:{escapedOffsets:t,escaped:A(t)}}}default:return{}}}}},P=function(o){return void 0===o&&(o=0),{name:"offset",options:o,async fn(r){const{x:i,y:a}=r,l=await async function(o,r){const{placement:i,platform:a,elements:l}=o,c=await(null==a.isRTL?void 0:a.isRTL(l.floating)),s=t(i),u=n(i),f="x"===e(i),d=["left","top"].includes(s)?-1:1,m=c&&f?-1:1,y="function"==typeof r?r(o):r;let{mainAxis:p,crossAxis:x,alignmentAxis:g}="number"==typeof y?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...y};return u&&"number"==typeof g&&(x="end"===u?-1*g:g),f?{x:x*m,y:p*d}:{x:p*d,y:x*m}}(r,o);return{x:i+l.x,y:a+l.y,data:l}}}},R=function(n){return void 0===n&&(n={}),{name:"shift",options:n,async fn(o){const{x:r,y:i,placement:a}=o,{mainAxis:c=!0,crossAxis:s=!1,limiter:f={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...d}=n,m={x:r,y:i},y=await l(o,d),p=e(t(a)),x="x"===p?"y":"x";let g=m[p],h=m[x];c&&(g=u(g+y["y"===p?"top":"left"],g,g-y["y"===p?"bottom":"right"])),s&&(h=u(h+y["y"===x?"top":"left"],h,h-y["y"===x?"bottom":"right"]));const w=f.fn({...o,[p]:g,[x]:h});return{...w,data:{x:w.x-r,y:w.y-i}}}}};function B(t){var n;return(null==(n=t.ownerDocument)?void 0:n.defaultView)||window}function D(t){return B(t).getComputedStyle(t)}function F(t){return O(t)?(t.nodeName||"").toLowerCase():""}let M;function T(){if(M)return M;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(M=t.brands.map((t=>t.brand+"/"+t.version)).join(" "),M):navigator.userAgent}function C(t){return t instanceof B(t).HTMLElement}function L(t){return t instanceof B(t).Element}function O(t){return t instanceof B(t).Node}function S(t){return"undefined"!=typeof ShadowRoot&&(t instanceof B(t).ShadowRoot||t instanceof ShadowRoot)}function H(t){const{overflow:n,overflowX:e,overflowY:o,display:r}=D(t);return/auto|scroll|overlay|hidden|clip/.test(n+o+e)&&!["inline","contents"].includes(r)}function E(t){return["table","td","th"].includes(F(t))}function N(t){const n=/firefox/i.test(T()),e=D(t),o=e.backdropFilter||e.WebkitBackdropFilter;return"none"!==e.transform||"none"!==e.perspective||!!o&&"none"!==o||n&&"filter"===e.willChange||n&&!!e.filter&&"none"!==e.filter||["transform","perspective"].some((t=>e.willChange.includes(t)))||["paint","layout","strict","content"].some((t=>{const n=e.contain;return null!=n&&n.includes(t)}))}function j(){return!/^((?!chrome|android).)*safari/i.test(T())}function V(t){return["html","body","#document"].includes(F(t))}const X=Math.min,Y=Math.max,_=Math.round;function q(t){const n=D(t);let e=parseFloat(n.width),o=parseFloat(n.height);const r=t.offsetWidth,i=t.offsetHeight,a=_(e)!==r||_(o)!==i;return a&&(e=r,o=i),{width:e,height:o,fallback:a}}function z(t){return L(t)?t:t.contextElement}const G={x:1,y:1};function I(t){const n=z(t);if(!C(n))return G;const e=n.getBoundingClientRect(),{width:o,height:r,fallback:i}=q(n);let a=(i?_(e.width):e.width)/o,l=(i?_(e.height):e.height)/r;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}function J(t,n,e,o){var r,i;void 0===n&&(n=!1),void 0===e&&(e=!1);const a=t.getBoundingClientRect(),l=z(t);let c=G;n&&(o?L(o)&&(c=I(o)):c=I(t));const s=l?B(l):window,u=!j()&&e;let f=(a.left+(u&&(null==(r=s.visualViewport)?void 0:r.offsetLeft)||0))/c.x,d=(a.top+(u&&(null==(i=s.visualViewport)?void 0:i.offsetTop)||0))/c.y,m=a.width/c.x,y=a.height/c.y;if(l){const t=B(l),n=o&&L(o)?B(o):o;let e=t.frameElement;for(;e&&o&&n!==t;){const t=I(e),n=e.getBoundingClientRect(),o=getComputedStyle(e);n.x+=(e.clientLeft+parseFloat(o.paddingLeft))*t.x,n.y+=(e.clientTop+parseFloat(o.paddingTop))*t.y,f*=t.x,d*=t.y,m*=t.x,y*=t.y,f+=n.x,d+=n.y,e=B(e).frameElement}}return{width:m,height:y,top:d,right:f+m,bottom:d+y,left:f,x:f,y:d}}function K(t){return((O(t)?t.ownerDocument:t.document)||window.document).documentElement}function Q(t){return L(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function U(t){return J(K(t)).left+Q(t).scrollLeft}function W(t,n,e){const o=C(n),r=K(n),i=J(t,!0,"fixed"===e,n);let a={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(o||!o&&"fixed"!==e)if(("body"!==F(n)||H(r))&&(a=Q(n)),C(n)){const t=J(n,!0);l.x=t.x+n.clientLeft,l.y=t.y+n.clientTop}else r&&(l.x=U(r));return{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function Z(t){if("html"===F(t))return t;const n=t.assignedSlot||t.parentNode||(S(t)?t.host:null)||K(t);return S(n)?n.host:n}function $(t){return C(t)&&"fixed"!==D(t).position?t.offsetParent:null}function tt(t){const n=B(t);let e=$(t);for(;e&&E(e)&&"static"===D(e).position;)e=$(e);return e&&("html"===F(e)||"body"===F(e)&&"static"===D(e).position&&!N(e))?n:e||function(t){let n=Z(t);for(;C(n)&&!V(n);){if(N(n))return n;n=Z(n)}return null}(t)||n}function nt(t){const n=Z(t);return V(n)?t.ownerDocument.body:C(n)&&H(n)?n:nt(n)}function et(t,n){var e;void 0===n&&(n=[]);const o=nt(t),r=o===(null==(e=t.ownerDocument)?void 0:e.body),i=B(o);return r?n.concat(i,i.visualViewport||[],H(o)?o:[]):n.concat(o,et(o))}function ot(t,n,e){return"viewport"===n?a(function(t,n){const e=B(t),o=K(t),r=e.visualViewport;let i=o.clientWidth,a=o.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;const t=j();(t||!t&&"fixed"===n)&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:l,y:c}}(t,e)):L(n)?function(t,n){const e=J(t,!0,"fixed"===n),o=e.top+t.clientTop,r=e.left+t.clientLeft,i=C(t)?I(t):{x:1,y:1},a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=r*i.x,s=o*i.y;return{top:s,left:c,right:c+a,bottom:s+l,x:c,y:s,width:a,height:l}}(n,e):a(function(t){var n;const e=K(t),o=Q(t),r=null==(n=t.ownerDocument)?void 0:n.body,i=Y(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Y(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let l=-o.scrollLeft+U(t);const c=-o.scrollTop;return"rtl"===D(r||e).direction&&(l+=Y(e.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:l,y:c}}(K(t)))}const rt={getClippingRect:function(t){let{element:n,boundary:e,rootBoundary:o,strategy:r}=t;const i=[..."clippingAncestors"===e?function(t,n){const e=n.get(t);if(e)return e;let o=et(t).filter((t=>L(t)&&"body"!==F(t))),r=null;const i="fixed"===D(t).position;let a=i?Z(t):t;for(;L(a)&&!V(a);){const t=D(a),n=N(a);(i?n||r:n||"static"!==t.position||!r||!["absolute","fixed"].includes(r.position))?r=t:o=o.filter((t=>t!==a)),a=Z(a)}return n.set(t,o),o}(n,this._c):[].concat(e),o],a=i.reduce(((t,e)=>{const o=ot(n,e,r);return t.top=Y(o.top,t.top),t.right=X(o.right,t.right),t.bottom=X(o.bottom,t.bottom),t.left=Y(o.left,t.left),t}),ot(n,i[0],r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:n,offsetParent:e,strategy:o}=t;const r=C(e),i=K(e);if(e===i)return n;let a={scrollLeft:0,scrollTop:0},l={x:1,y:1};const c={x:0,y:0};if((r||!r&&"fixed"!==o)&&(("body"!==F(e)||H(i))&&(a=Q(e)),C(e))){const t=J(e);l=I(e),c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-a.scrollLeft*l.x+c.x,y:n.y*l.y-a.scrollTop*l.y+c.y}},isElement:L,getDimensions:function(t){return q(t)},getOffsetParent:tt,getDocumentElement:K,getScale:I,async getElementRects(t){let{reference:n,floating:e,strategy:o}=t;const r=this.getOffsetParent||tt,i=this.getDimensions;return{reference:W(n,await r(e),o),floating:{x:0,y:0,...await i(e)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===D(t).direction},it=(t,n,e)=>{const o=new Map,i={platform:rt,...e},a={...i.platform,_c:o};return(async(t,n,e)=>{const{placement:o="bottom",strategy:i="absolute",middleware:a=[],platform:l}=e,c=a.filter(Boolean),s=await(null==l.isRTL?void 0:l.isRTL(n));let u=await l.getElementRects({reference:t,floating:n,strategy:i}),{x:f,y:d}=r(u,o,s),m=o,y={},p=0;for(let e=0;e<c.length;e++){const{name:a,fn:x}=c[e],{x:g,y:h,data:w,reset:v}=await x({x:f,y:d,initialPlacement:o,placement:m,strategy:i,middlewareData:y,rects:u,platform:l,elements:{reference:t,floating:n}});f=null!=g?g:f,d=null!=h?h:d,y={...y,[a]:{...y[a],...w}},v&&p<=50&&(p++,"object"==typeof v&&(v.placement&&(m=v.placement),v.rects&&(u=!0===v.rects?await l.getElementRects({reference:t,floating:n,strategy:i}):v.rects),({x:f,y:d}=r(u,m,s))),e=-1)}return{x:f,y:d,placement:m,strategy:i,middlewareData:y}})(t,n,{...i,platform:a})};export{w as a,f as b,it as c,v as f,k as h,P as o,R as s}