import{r as t,h as i,H as e}from"./p-aff91b47.js";import{d as s,b as a}from"./p-1577a76b.js";import{s as n}from"./p-e84859fa.js";import"./p-a03d57a1.js";import{d as r}from"./p-5a97005d.js";import"./p-a6712bf4.js";import"./p-e497ad6d.js";import{R as p}from"./p-fd4b6d8b.js";import{S as c}from"./p-732508ba.js";import"./p-ae02fe11.js";import"./p-bf38ee7f.js";var o=function(t,i,e,s){var a,n=arguments.length,r=n<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,s);else for(var p=t.length-1;p>=0;p--)(a=t[p])&&(r=(n<3?a(r):n>3?a(i,e,r):a(i,e))||r);return n>3&&r&&Object.defineProperty(i,e,r),r};const h=class{constructor(e){t(this,e),this.config=r,this.hideHeader=!1,this.iconPack=s,this.view="sidebar",this.t=a(),this.search="",this.participants=[],this.createParticipantNode=t=>{const e={meeting:this.meeting,view:this.view,t:this.t,config:this.config,states:n,size:this.size,iconPack:this.iconPack};return i("div",null,i(p,{element:"dyte-participant",defaults:e,props:{role:"listitem",participant:t,key:t.id},childProps:Object.assign(Object.assign({},e),{participant:t,size:this.size}),deepProps:!0}))},this.updateStageList=()=>{this.getParticipants(this.search)}}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){const{participants:t,stage:i}=this.meeting;null!=this.meeting&&(this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),t.joined.removeListener("stageStatusUpdate",this.updateStageList),null==i||i.removeListener("stageStatusUpdate",this.updateStageList))}meetingChanged(t){null!=t&&(this.participantJoinedListener=t=>{if("ON_STAGE"!==t.stageStatus)return;const i=this.search.toLowerCase();t.name.toLowerCase().includes(i)&&t.id.toLowerCase().includes(i)&&(this.participants=[...this.participants.filter((i=>i.id!==t.id)),t])},this.participantLeftListener=t=>{this.participants=this.participants.filter((i=>i.id!==t.id))},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),this.updateStageList(),null==t||t.participants.joined.on("stageStatusUpdate",this.updateStageList),null==t||t.stage.on("stageStatusUpdate",this.updateStageList))}searchChanged(t){this.getParticipants(t)}getParticipants(t=this.search){let i="ON_STAGE"===this.meeting.stage.status?[this.meeting.self]:[];i=[...i,...this.meeting.participants.joined.toArray().filter((t=>"ON_STAGE"===t.stageStatus))],this.participants=""===t?i:i.filter((i=>{var e;return(null!==(e=i.name)&&void 0!==e?e:i.id).toLowerCase().includes(t.toLowerCase())}))}render(){return i(e,{key:"162607a249f4a1f67af37d168316ad6eca88d058"},i("div",{key:"eacc7db6e17eeb785c2451ef532b99dafc75eed8",class:"participants-container"},!this.hideHeader&&i("div",{key:"45e022312dc2de67fa8f2c3ce92bbf87ae9fc24b",class:"heading-count",part:"heading-count"},this.t("participants")," (",this.participants.length,")"),i("dyte-virtualized-participant-list",{key:"1b8042c78ebcb241b1439f1c7de8c0663effb841",items:this.participants,renderItem:this.createParticipantNode,part:"participants",class:"participants",emptyListElement:i("div",{class:"empty-stage-list"},this.t(this.search.length>0?"search.could_not_find":"search.empty"))})))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};o([c()],h.prototype,"meeting",void 0),o([c()],h.prototype,"iconPack",void 0),o([c()],h.prototype,"t",void 0),h.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.participants-container{margin-bottom:var(--dyte-space-4, 16px);height:100%;width:100%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-stage-list{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-participant{width:100%}";export{h as dyte_participants_stage_list}