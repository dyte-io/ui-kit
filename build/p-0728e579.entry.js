import{r as t,c as e,h as a,H as s}from"./p-aff91b47.js";import{d as i,b as r}from"./p-c709b180.js";import{R as o}from"./p-fd4b6d8b.js";import{s as d}from"./p-fd194414.js";import"./p-a03d57a1.js";import{d as c}from"./p-5a97005d.js";import"./p-a6712bf4.js";import"./p-e497ad6d.js";import{S as p}from"./p-86cdc955.js";import{d as n}from"./p-a08b5a59.js";import"./p-ae02fe11.js";import"./p-bf38ee7f.js";import"./p-2c3cda13.js";var h=function(t,e,a,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,a,s);else for(var d=t.length-1;d>=0;d--)(i=t[d])&&(o=(r<3?i(o):r>3?i(e,a,o):i(e,a))||o);return r>3&&o&&Object.defineProperty(e,a,o),o};const l=class{constructor(s){t(this,s),this.stateUpdate=e(this,"dyteStateUpdate",7),this.config=c,this.iconPack=i,this.defaultParticipantsTabId="stage-list",this.t=r(),this.currentParticipantsTabId=this.defaultParticipantsTabId,this.tabs=[],this.hasRequests=!1,this.search="",this.updateParticipantCountsInTabs=n((()=>{var t;let e=(null===(t=this.meeting.participants.waitlisted)||void 0===t?void 0:t.size)||0,s=0,i=0;this.meeting.participants.joined.toArray().forEach((t=>{"ON_STAGE"===t.stageStatus&&s++,"OFF_STAGE"===t.stageStatus&&i++,"REQUESTED_TO_JOIN_STAGE"===t.stageStatus&&(e++,i++),"ACCEPTED_TO_JOIN_STAGE"===t.stageStatus&&i++})),"ON_STAGE"===this.meeting.self.stageStatus&&s++,"OFF_STAGE"===this.meeting.self.stageStatus&&i++,"REQUESTED_TO_JOIN_STAGE"===this.meeting.self.stageStatus&&(e++,i++),"ACCEPTED_TO_JOIN_STAGE"===this.meeting.self.stageStatus&&i++;const r=[];this.shouldShowRequestsTab()&&r.push({id:"requests",name:a("span",null,this.t("requests")," ",a("span",{class:`tab-participant-count-badge ${e>0?"requests-pending":""} ${"requests"===this.currentParticipantsTabId?"selected-tab":""}`},e))}),r.push({id:"stage-list",name:a("span",null,this.t("participants")," ",a("span",{class:"tab-participant-count-badge "+("stage-list"===this.currentParticipantsTabId?"selected-tab":"")},s))}),this.shouldShowViewersTab()&&r.push({id:"viewer-list",name:a("span",null,this.t("viewers")," ",a("span",{class:"tab-participant-count-badge "+("viewer-list"===this.currentParticipantsTabId?"selected-tab":"")},i))}),this.tabs=r,this.hasRequests=e>0})),this.onSearchInput=t=>{this.search=t.target.value},this.shouldShowViewersTab=()=>{var t,e,a;return null===(a=null===(e=null===(t=this.meeting)||void 0===t?void 0:t.self)||void 0===e?void 0:e.permissions)||void 0===a?void 0:a.stageEnabled},this.shouldShowRequestsTab=()=>{var t;let e=!1;return e="LIVESTREAM"!==this.meeting.meta.viewType&&(null===(t=this.meeting.self.config.waitingRoom)||void 0===t?void 0:t.isEnabled)&&this.meeting.self.permissions.acceptWaitingRequests,this.meeting.self.permissions.stageEnabled&&this.meeting.self.permissions.acceptStageRequests||e},this.viewSection=t=>{this.currentParticipantsTabId=t}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){null!=this.meeting&&(this.meeting.participants.joined.off("participantJoined",this.updateParticipantCountsInTabs),this.meeting.participants.joined.off("participantsUpdate",this.updateParticipantCountsInTabs),this.meeting.participants.joined.off("participantLeft",this.updateParticipantCountsInTabs),this.meeting.participants.joined.off("stageStatusUpdate",this.updateParticipantCountsInTabs),this.meeting.stage.off("stageStatusUpdate",this.updateParticipantCountsInTabs),this.meeting.participants.waitlisted.off("participantJoined",this.updateParticipantCountsInTabs),this.meeting.participants.waitlisted.off("participantLeft",this.updateParticipantCountsInTabs),this.meeting.participants.waitlisted.off("stageStatusUpdate",this.updateParticipantCountsInTabs))}meetingChanged(t){null!=t&&(t.participants.joined.on("participantJoined",this.updateParticipantCountsInTabs),t.participants.joined.on("participantsUpdate",this.updateParticipantCountsInTabs),t.participants.joined.on("participantLeft",this.updateParticipantCountsInTabs),t.participants.joined.on("stageStatusUpdate",this.updateParticipantCountsInTabs),t.stage.on("stageStatusUpdate",this.updateParticipantCountsInTabs),t.participants.waitlisted.on("participantJoined",this.updateParticipantCountsInTabs),t.participants.waitlisted.on("participantLeft",this.updateParticipantCountsInTabs),t.participants.waitlisted.on("stageStatusUpdate",this.updateParticipantCountsInTabs),this.updateParticipantCountsInTabs())}currentParticipantsTabIdChanged(){d.participantsTabId=this.currentParticipantsTabId,this.stateUpdate.emit({participantsTabId:this.currentParticipantsTabId}),this.updateParticipantCountsInTabs()}render(){const t={meeting:this.meeting,states:this.states||d,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t};return a(s,{key:"6e09954ff116a3039201509f11b4e5752f70392b"},a("div",{key:"b5e8bf751a8ea6ef2021d02b3af26e5eaf6d2f8a",class:"search",part:"search"},a("dyte-icon",{key:"5b83336b501abe8486f50c900fdb0ceaad1fd58d",icon:this.iconPack.search,part:"search-icon"}),a("input",{key:"0ce4699eeb14e022a89ecf3f91cb35031c9cb43e",type:"search",autocomplete:"off",placeholder:this.t("search"),onInput:this.onSearchInput,part:"search-input"})),a("slot",{key:"5af7b4a9389c6d011e13844f3a91570defe54931",name:"start"}),a("div",{key:"9abe080f219707b2b2812fa47fced6a1d5c17e78",class:"ctr scrollbar "+("requests"!==this.currentParticipantsTabId?"virtualised":""),part:"container"},a("dyte-sidebar-ui",{key:"5b8aa810a22977e8efecad57dea95c2a2ca172d6",tabs:this.tabs,currentTab:this.currentParticipantsTabId,view:"full-screen",hideHeader:!0,hideCloseAction:!0,style:{position:"relative"},onTabChange:t=>{this.viewSection(t.detail),t.stopPropagation()}},(!this.currentParticipantsTabId||"stage-list"===this.currentParticipantsTabId)&&a("div",{key:"e135dde60c6c1d7a3c9024c4b1f997025e7355bf",slot:"stage-list",style:{marginTop:"10px",height:"100%"}},a(o,{key:"51289d095bcf9145f9b42c51e61dcc1e42ebd1c7",element:"dyte-participants-stage-list",defaults:t,props:{search:this.search,hideHeader:!0}})),"requests"===this.currentParticipantsTabId&&a("div",{key:"e2a892477815371afcb2e1e1167a544289626e5e",slot:"requests",style:{marginTop:"10px",height:"100%"}},!this.hasRequests&&a("div",{key:"ed6fa78fc1f4d06e217c46fb640bfee41c9f1132",class:"no-pending-requests"},this.t("participants.no_pending_requests")),a(o,{key:"21264deca7212cff0baee67125a17ec402fc548f",element:"dyte-participants-stage-queue",defaults:t}),a(o,{key:"ca10ce21f236aa896d6bde5471f13d4018450c42",element:"dyte-participants-waiting-list",defaults:t})),"viewer-list"===this.currentParticipantsTabId&&a("div",{key:"a4d8b0d11bde69acee53023915225a5a45a0dcf8",slot:"viewer-list",style:{marginTop:"10px",height:"100%"}},a(o,{key:"4631eca09498e13de1b2f0d25cc792b8887a3166",element:"dyte-participants-viewer-list",defaults:t,props:{search:this.search,hideHeader:!0}})))),a("slot",{key:"6c063def29532d7c74df63a80e73102b809c55cb",name:"end"}))}static get watchers(){return{meeting:["meetingChanged"],currentParticipantsTabId:["currentParticipantsTabIdChanged"]}}};h([p()],l.prototype,"meeting",void 0),h([p()],l.prototype,"states",void 0),h([p()],l.prototype,"iconPack",void 0),h([p()],l.prototype,"t",void 0),l.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);box-sizing:border-box;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.ctr.virtualised{overflow-y:hidden}.search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px)}.search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}:host([size='md']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}:host([size='sm']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}.no-pending-requests{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}";export{l as dyte_participants}