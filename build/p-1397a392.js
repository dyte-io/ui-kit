const t=["top","right","bottom","left"],n=["start","end"],e=t.reduce(((t,e)=>t.concat(e,e+"-"+n[0],e+"-"+n[1])),[]),r=Math.min,o=Math.max,i=Math.round,a=t=>({x:t,y:t}),c={left:"right",right:"left",bottom:"top",top:"bottom"},l={start:"end",end:"start"};function s(t,n,e){return o(t,r(n,e))}function u(t,n){return"function"==typeof t?t(n):t}function f(t){return t.split("-")[0]}function d(t){return t.split("-")[1]}function m(t){return"x"===t?"y":"x"}function y(t){return"y"===t?"height":"width"}function p(t){return["top","bottom"].includes(f(t))?"y":"x"}function h(t){return m(p(t))}function w(t,n,e){void 0===e&&(e=!1);const r=d(t),o=h(t),i=y(o);let a="x"===o?r===(e?"end":"start")?"right":"left":"start"===r?"bottom":"top";return n.reference[i]>n.floating[i]&&(a=x(a)),[a,x(a)]}function g(t){return t.replace(/start|end/g,(t=>l[t]))}function x(t){return t.replace(/left|right|bottom|top/g,(t=>c[t]))}function v(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function b(t){const{x:n,y:e,width:r,height:o}=t;return{width:r,height:o,top:e,left:n,right:n+r,bottom:e+o,x:n,y:e}}function A(t,n,e){let{reference:r,floating:o}=t;const i=p(n),a=h(n),c=y(a),l=f(n),s="y"===i,u=r.x+r.width/2-o.width/2,m=r.y+r.height/2-o.height/2,w=r[c]/2-o[c]/2;let g;switch(l){case"top":g={x:u,y:r.y-o.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:m};break;case"left":g={x:r.x-o.width,y:m};break;default:g={x:r.x,y:r.y}}switch(d(n)){case"start":g[a]-=w*(e&&s?-1:1);break;case"end":g[a]+=w*(e&&s?-1:1)}return g}async function k(t,n){var e;void 0===n&&(n={});const{x:r,y:o,platform:i,rects:a,elements:c,strategy:l}=t,{boundary:s="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:m=!1,padding:y=0}=u(n,t),p=v(y),h=c[m?"floating"===d?"reference":"floating":d],w=b(await i.getClippingRect({element:null==(e=await(null==i.isElement?void 0:i.isElement(h)))||e?h:h.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(c.floating)),boundary:s,rootBoundary:f,strategy:l})),g="floating"===d?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,x=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c.floating)),A=await(null==i.isElement?void 0:i.isElement(x))&&await(null==i.getScale?void 0:i.getScale(x))||{x:1,y:1},k=b(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:g,offsetParent:x,strategy:l}):g);return{top:(w.top-k.top+p.top)/A.y,bottom:(k.bottom-w.bottom+p.bottom)/A.y,left:(w.left-k.left+p.left)/A.x,right:(k.right-w.right+p.right)/A.x}}function S(t,n){return{top:t.top-n.height,right:t.right-n.width,bottom:t.bottom-n.height,left:t.left-n.width}}function P(n){return t.some((t=>n[t]>=0))}function R(){return"undefined"!=typeof window}function D(t){return T(t)?(t.nodeName||"").toLowerCase():"#document"}function C(t){var n;return(null==t||null==(n=t.ownerDocument)?void 0:n.defaultView)||window}function O(t){var n;return null==(n=(T(t)?t.ownerDocument:t.document)||window.document)?void 0:n.documentElement}function T(t){return!!R()&&(t instanceof Node||t instanceof C(t).Node)}function B(t){return!!R()&&(t instanceof Element||t instanceof C(t).Element)}function F(t){return!!R()&&(t instanceof HTMLElement||t instanceof C(t).HTMLElement)}function H(t){return!(!R()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof C(t).ShadowRoot)}function L(t){const{overflow:n,overflowX:e,overflowY:r,display:o}=V(t);return/auto|scroll|overlay|hidden|clip/.test(n+r+e)&&!["inline","contents"].includes(o)}function E(t){return["table","td","th"].includes(D(t))}function M(t){return[":popover-open",":modal"].some((n=>{try{return t.matches(n)}catch(t){return!1}}))}function N(t){const n=j(),e=B(t)?V(t):t;return["transform","translate","scale","rotate","perspective"].some((t=>!!e[t]&&"none"!==e[t]))||!!e.containerType&&"normal"!==e.containerType||!n&&!!e.backdropFilter&&"none"!==e.backdropFilter||!n&&!!e.filter&&"none"!==e.filter||["transform","translate","scale","rotate","perspective","filter"].some((t=>(e.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(e.contain||"").includes(t)))}function j(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function $(t){return["html","body","#document"].includes(D(t))}function V(t){return C(t).getComputedStyle(t)}function W(t){return B(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function X(t){if("html"===D(t))return t;const n=t.assignedSlot||t.parentNode||H(t)&&t.host||O(t);return H(n)?n.host:n}function Y(t){const n=X(t);return $(n)?t.ownerDocument?t.ownerDocument.body:t.body:F(n)&&L(n)?n:Y(n)}function _(t,n,e){var r;void 0===n&&(n=[]),void 0===e&&(e=!0);const o=Y(t),i=o===(null==(r=t.ownerDocument)?void 0:r.body),a=C(o);if(i){const t=q(a);return n.concat(a,a.visualViewport||[],L(o)?o:[],t&&e?_(t):[])}return n.concat(o,_(o,[],e))}function q(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function z(t){const n=V(t);let e=parseFloat(n.width)||0,r=parseFloat(n.height)||0;const o=F(t),a=o?t.offsetWidth:e,c=o?t.offsetHeight:r,l=i(e)!==a||i(r)!==c;return l&&(e=a,r=c),{width:e,height:r,$:l}}function G(t){return B(t)?t:t.contextElement}function I(t){const n=G(t);if(!F(n))return a(1);const e=n.getBoundingClientRect(),{width:r,height:o,$:c}=z(n);let l=(c?i(e.width):e.width)/r,s=(c?i(e.height):e.height)/o;return l&&Number.isFinite(l)||(l=1),s&&Number.isFinite(s)||(s=1),{x:l,y:s}}const J=a(0);function K(t){const n=C(t);return j()&&n.visualViewport?{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}:J}function Q(t,n,e,r){void 0===n&&(n=!1),void 0===e&&(e=!1);const o=t.getBoundingClientRect(),i=G(t);let c=a(1);n&&(r?B(r)&&(c=I(r)):c=I(t));const l=function(t,n,e){return void 0===n&&(n=!1),!(!e||n&&e!==C(t))&&n}(i,e,r)?K(i):a(0);let s=(o.left+l.x)/c.x,u=(o.top+l.y)/c.y,f=o.width/c.x,d=o.height/c.y;if(i){const t=C(i),n=r&&B(r)?C(r):r;let e=t,o=q(e);for(;o&&r&&n!==e;){const t=I(o),n=o.getBoundingClientRect(),r=V(o),i=n.left+(o.clientLeft+parseFloat(r.paddingLeft))*t.x,a=n.top+(o.clientTop+parseFloat(r.paddingTop))*t.y;s*=t.x,u*=t.y,f*=t.x,d*=t.y,s+=i,u+=a,e=C(o),o=q(e)}}return b({width:f,height:d,x:s,y:u})}function U(t,n){const e=W(t).scrollLeft;return n?n.left+e:Q(O(t)).left+e}function Z(t,n,e){void 0===e&&(e=!1);const r=t.getBoundingClientRect();return{x:r.left+n.scrollLeft-(e?0:U(t,r)),y:r.top+n.scrollTop}}function tt(t,n,e){let r;if("viewport"===n)r=function(t,n){const e=C(t),r=O(t),o=e.visualViewport;let i=r.clientWidth,a=r.clientHeight,c=0,l=0;if(o){i=o.width,a=o.height;const t=j();(!t||t&&"fixed"===n)&&(c=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:c,y:l}}(t,e);else if("document"===n)r=function(t){const n=O(t),e=W(t),r=t.ownerDocument.body,i=o(n.scrollWidth,n.clientWidth,r.scrollWidth,r.clientWidth),a=o(n.scrollHeight,n.clientHeight,r.scrollHeight,r.clientHeight);let c=-e.scrollLeft+U(t);const l=-e.scrollTop;return"rtl"===V(r).direction&&(c+=o(n.clientWidth,r.clientWidth)-i),{width:i,height:a,x:c,y:l}}(O(t));else if(B(n))r=function(t,n){const e=Q(t,!0,"fixed"===n),r=e.top+t.clientTop,o=e.left+t.clientLeft,i=F(t)?I(t):a(1);return{width:t.clientWidth*i.x,height:t.clientHeight*i.y,x:o*i.x,y:r*i.y}}(n,e);else{const e=K(t);r={x:n.x-e.x,y:n.y-e.y,width:n.width,height:n.height}}return b(r)}function nt(t,n){const e=X(t);return!(e===n||!B(e)||$(e))&&("fixed"===V(e).position||nt(e,n))}function et(t,n,e){const r=F(n),o=O(n),i="fixed"===e,c=Q(t,!0,i,n);let l={scrollLeft:0,scrollTop:0};const s=a(0);function u(){s.x=U(o)}if(r||!r&&!i)if(("body"!==D(n)||L(o))&&(l=W(n)),r){const t=Q(n,!0,i,n);s.x=t.x+n.clientLeft,s.y=t.y+n.clientTop}else o&&u();i&&!r&&o&&u();const f=!o||r||i?a(0):Z(o,l);return{x:c.left+l.scrollLeft-s.x-f.x,y:c.top+l.scrollTop-s.y-f.y,width:c.width,height:c.height}}function rt(t){return"static"===V(t).position}function ot(t,n){if(!F(t)||"fixed"===V(t).position)return null;if(n)return n(t);let e=t.offsetParent;return O(t)===e&&(e=e.ownerDocument.body),e}function it(t,n){const e=C(t);if(M(t))return e;if(!F(t)){let n=X(t);for(;n&&!$(n);){if(B(n)&&!rt(n))return n;n=X(n)}return e}let r=ot(t,n);for(;r&&E(r)&&rt(r);)r=ot(r,n);return r&&$(r)&&rt(r)&&!N(r)?e:r||function(t){let n=X(t);for(;F(n)&&!$(n);){if(N(n))return n;if(M(n))return null;n=X(n)}return null}(t)||e}const at={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:n,rect:e,offsetParent:r,strategy:o}=t;const i="fixed"===o,c=O(r),l=!!n&&M(n.floating);if(r===c||l&&i)return e;let s={scrollLeft:0,scrollTop:0},u=a(1);const f=a(0),d=F(r);if((d||!d&&!i)&&(("body"!==D(r)||L(c))&&(s=W(r)),F(r))){const t=Q(r);u=I(r),f.x=t.x+r.clientLeft,f.y=t.y+r.clientTop}const m=!c||d||i?a(0):Z(c,s,!0);return{width:e.width*u.x,height:e.height*u.y,x:e.x*u.x-s.scrollLeft*u.x+f.x+m.x,y:e.y*u.y-s.scrollTop*u.y+f.y+m.y}},getDocumentElement:O,getClippingRect:function(t){let{element:n,boundary:e,rootBoundary:i,strategy:a}=t;const c=[..."clippingAncestors"===e?M(n)?[]:function(t,n){const e=n.get(t);if(e)return e;let r=_(t,[],!1).filter((t=>B(t)&&"body"!==D(t))),o=null;const i="fixed"===V(t).position;let a=i?X(t):t;for(;B(a)&&!$(a);){const n=V(a),e=N(a);e||"fixed"!==n.position||(o=null),(i?!e&&!o:!e&&"static"===n.position&&o&&["absolute","fixed"].includes(o.position)||L(a)&&!e&&nt(t,a))?r=r.filter((t=>t!==a)):o=n,a=X(a)}return n.set(t,r),r}(n,this._c):[].concat(e),i],l=c.reduce(((t,e)=>{const i=tt(n,e,a);return t.top=o(i.top,t.top),t.right=r(i.right,t.right),t.bottom=r(i.bottom,t.bottom),t.left=o(i.left,t.left),t}),tt(n,c[0],a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:it,getElementRects:async function(t){const n=this.getOffsetParent||it,e=this.getDimensions,r=await e(t.floating);return{reference:et(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:n,height:e}=z(t);return{width:n,height:e}},getScale:I,isElement:B,isRTL:function(t){return"rtl"===V(t).direction}},ct=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(n){var e,r;const{x:o,y:i,placement:a,middlewareData:c}=n,l=await async function(t,n){const{placement:e,platform:r,elements:o}=t,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),a=f(e),c=d(e),l="y"===p(e),s=["left","top"].includes(a)?-1:1,m=i&&l?-1:1,y=u(n,t);let{mainAxis:h,crossAxis:w,alignmentAxis:g}="number"==typeof y?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return c&&"number"==typeof g&&(w="end"===c?-1*g:g),l?{x:w*m,y:h*s}:{x:h*s,y:w*m}}(n,t);return a===(null==(e=c.offset)?void 0:e.placement)&&null!=(r=c.arrow)&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:a}}}}},lt=function(t){return void 0===t&&(t={}),{name:"autoPlacement",options:t,async fn(n){var r,o,i;const{rects:a,middlewareData:c,placement:l,platform:s,elements:m}=n,{crossAxis:y=!1,alignment:p,allowedPlacements:h=e,autoAlignment:x=!0,...v}=u(t,n),b=void 0!==p||h===e?function(t,n,e){return(t?[...e.filter((n=>d(n)===t)),...e.filter((n=>d(n)!==t))]:e.filter((t=>f(t)===t))).filter((e=>!t||d(e)===t||!!n&&g(e)!==e))}(p||null,x,h):h,A=await k(n,v),S=(null==(r=c.autoPlacement)?void 0:r.index)||0,P=b[S];if(null==P)return{};const R=w(P,a,await(null==s.isRTL?void 0:s.isRTL(m.floating)));if(l!==P)return{reset:{placement:b[0]}};const D=[A[f(P)],A[R[0]],A[R[1]]],C=[...(null==(o=c.autoPlacement)?void 0:o.overflows)||[],{placement:P,overflows:D}],O=b[S+1];if(O)return{data:{index:S+1,overflows:C},reset:{placement:O}};const T=C.map((t=>{const n=d(t.placement);return[t.placement,n&&y?t.overflows.slice(0,2).reduce(((t,n)=>t+n),0):t.overflows[0],t.overflows]})).sort(((t,n)=>t[1]-n[1])),B=(null==(i=T.filter((t=>t[2].slice(0,d(t[0])?2:3).every((t=>t<=0))))[0])?void 0:i[0])||T[0][0];return B!==l?{data:{index:S+1,overflows:C},reset:{placement:B}}:{}}}},st=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(n){const{x:e,y:r,placement:o}=n,{mainAxis:i=!0,crossAxis:a=!1,limiter:c={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...l}=u(t,n),d={x:e,y:r},y=await k(n,l),h=p(f(o)),w=m(h);let g=d[w],x=d[h];i&&(g=s(g+y["y"===w?"top":"left"],g,g-y["y"===w?"bottom":"right"])),a&&(x=s(x+y["y"===h?"top":"left"],x,x-y["y"===h?"bottom":"right"]));const v=c.fn({...n,[w]:g,[h]:x});return{...v,data:{x:v.x-e,y:v.y-r,enabled:{[w]:i,[h]:a}}}}}},ut=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(n){var e,r;const{placement:o,middlewareData:i,rects:a,initialPlacement:c,platform:l,elements:s}=n,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:h,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:A=!0,...S}=u(t,n);if(null!=(e=i.arrow)&&e.alignmentOffset)return{};const P=f(o),R=p(c),D=f(c)===c,C=await(null==l.isRTL?void 0:l.isRTL(s.floating)),O=h||(D||!A?[x(c)]:function(t){const n=x(t);return[g(t),n,g(n)]}(c)),T="none"!==b;!h&&T&&O.push(...function(t,n,e,r){const o=d(t);let i=function(t,n,e){const r=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return e?n?o:r:n?r:o;case"left":case"right":return n?i:a;default:return[]}}(f(t),"start"===e,r);return o&&(i=i.map((t=>t+"-"+o)),n&&(i=i.concat(i.map(g)))),i}(c,A,b,C));const B=[c,...O],F=await k(n,S),H=[];let L=(null==(r=i.flip)?void 0:r.overflows)||[];if(m&&H.push(F[P]),y){const t=w(o,a,C);H.push(F[t[0]],F[t[1]])}if(L=[...L,{placement:o,overflows:H}],!H.every((t=>t<=0))){var E,M;const t=((null==(E=i.flip)?void 0:E.index)||0)+1,n=B[t];if(n&&("alignment"!==y||R===p(n)||L.every((t=>t.overflows[0]>0&&p(t.placement)===R))))return{data:{index:t,overflows:L},reset:{placement:n}};let e=null==(M=L.filter((t=>t.overflows[0]<=0)).sort(((t,n)=>t.overflows[1]-n.overflows[1]))[0])?void 0:M.placement;if(!e)switch(v){case"bestFit":{var N;const t=null==(N=L.filter((t=>{if(T){const n=p(t.placement);return n===R||"y"===n}return!0})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])?void 0:N[0];t&&(e=t);break}case"initialPlacement":e=c}if(o!==e)return{reset:{placement:e}}}return{}}}},ft=function(t){return void 0===t&&(t={}),{name:"hide",options:t,async fn(n){const{rects:e}=n,{strategy:r="referenceHidden",...o}=u(t,n);switch(r){case"referenceHidden":{const t=S(await k(n,{...o,elementContext:"reference"}),e.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:P(t)}}}case"escaped":{const t=S(await k(n,{...o,altBoundary:!0}),e.floating);return{data:{escapedOffsets:t,escaped:P(t)}}}default:return{}}}}},dt=t=>({name:"arrow",options:t,async fn(n){const{x:e,y:o,placement:i,rects:a,platform:c,elements:l,middlewareData:f}=n,{element:m,padding:p=0}=u(t,n)||{};if(null==m)return{};const w=v(p),g={x:e,y:o},x=h(i),b=y(x),A=await c.getDimensions(m),k="y"===x,S=k?"top":"left",P=k?"bottom":"right",R=k?"clientHeight":"clientWidth",D=a.reference[b]+a.reference[x]-g[x]-a.floating[b],C=g[x]-a.reference[x],O=await(null==c.getOffsetParent?void 0:c.getOffsetParent(m));let T=O?O[R]:0;T&&await(null==c.isElement?void 0:c.isElement(O))||(T=l.floating[R]||a.floating[b]);const B=D/2-C/2,F=T/2-A[b]/2-1,H=r(w[S],F),L=r(w[P],F),E=H,M=T-A[b]-L,N=T/2-A[b]/2+B,j=s(E,N,M),$=!f.arrow&&null!=d(i)&&N!==j&&a.reference[b]/2-(N<E?H:L)-A[b]/2<0,V=$?N<E?N-E:N-M:0;return{[x]:g[x]+V,data:{[x]:j,centerOffset:N-j-V,...$&&{alignmentOffset:V}},reset:$}}}),mt=(t,n,e)=>{const r=new Map,o={platform:at,...e},i={...o.platform,_c:r};return(async(t,n,e)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=e,c=i.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(n));let s=await a.getElementRects({reference:t,floating:n,strategy:o}),{x:u,y:f}=A(s,r,l),d=r,m={},y=0;for(let e=0;e<c.length;e++){const{name:i,fn:p}=c[e],{x:h,y:w,data:g,reset:x}=await p({x:u,y:f,initialPlacement:r,placement:d,strategy:o,middlewareData:m,rects:s,platform:a,elements:{reference:t,floating:n}});u=null!=h?h:u,f=null!=w?w:f,m={...m,[i]:{...m[i],...g}},x&&y<=50&&(y++,"object"==typeof x&&(x.placement&&(d=x.placement),x.rects&&(s=!0===x.rects?await a.getElementRects({reference:t,floating:n,strategy:o}):x.rects),({x:u,y:f}=A(s,d,l))),e=-1)}return{x:u,y:f,placement:d,strategy:o,middlewareData:m}})(t,n,{...o,platform:i})};export{dt as a,lt as b,mt as c,ut as f,ft as h,ct as o,st as s}