import{r as t,w as i,h as e,H as r}from"./p-69f2ebde.js";import{d as a}from"./p-b155136e.js";import{u as o}from"./p-08e9b07c.js";const s=class{constructor(i){t(this,i),this.canInteractWithPlugin=()=>{const t=this.plugin.id;if(!t)return!0;const i=this.meeting.self.permissions.plugins.config[t];return!i||!i.accessControl||"FULL_ACCESS"===i.accessControl},this.meeting=void 0,this.plugin=void 0,this.iconPack=a,this.t=o(),this.canClosePlugin=!1,this.viewModeEnabled=!1}componentDidLoad(){this.meetingChanged(this.meeting),this.pluginChanged(this.plugin)}meetingChanged(t){if(null==t)return;const e=this.canInteractWithPlugin();this.viewModeEnabled=!e,i((()=>{this.canClosePlugin=t.self.permissions.plugins.canClose||this.plugin.enabledBy===t.self.id}))}pluginChanged(t){this.toggleViewModeListener=t=>{this.canInteractWithPlugin()||(this.viewModeEnabled=t)},null!=t&&(t.addPluginView(this.iframeEl,"plugin-main"),t.addListener("toggleViewMode",this.toggleViewModeListener))}disconnectedCallback(){var t,i;null===(t=this.plugin)||void 0===t||t.removePluginView("plugin-main"),null===(i=this.plugin)||void 0===i||i.removeListener("toggleViewMode",this.toggleViewModeListener)}render(){return null==this.plugin?null:e(r,null,e("header",{part:"header"},e("div",null,this.plugin.name),this.canClosePlugin&&e("div",null,e("dyte-button",{kind:"icon",onClick:()=>this.plugin.deactivate(),part:"button",iconPack:this.iconPack,t:this.t},e("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))),e("div",{class:"iframe-container"},!this.canInteractWithPlugin()&&this.viewModeEnabled?e("div",{class:"block-inputs"}):null,e("iframe",{ref:t=>this.iframeEl=t,part:"iframe"})))}static get watchers(){return{meeting:["meetingChanged"],plugin:["pluginChanged"]}}};s.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}header>div{display:flex;align-items:center}dyte-button{display:flex;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-direction:column;align-items:center;border-radius:9999px}dyte-button dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}iframe{display:block;flex:1 1 0%;margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-0, 0px);outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}.iframe-container{position:relative;height:100%;width:100%}.block-inputs{position:absolute;z-index:10;height:100%;width:100%;border-left-width:var(--dyte-border-width-none, 0);border-top-width:var(--dyte-border-width-lg, 4px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}iframe{height:100%;width:100%}";export{s as dyte_plugin_main}