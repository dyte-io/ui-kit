import{r as t,c as e,h as r,H as o}from"./p-aff91b47.js";import{S as a}from"./p-dc76c799.js";import{d as i,b as c}from"./p-c8aa84cb.js";import"./p-e497ad6d.js";var n=function(t,e,r,o){var a,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,o);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(c=(i<3?a(c):i>3?a(e,r,c):a(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};const d=class{constructor(r){t(this,r),this.onDeleteAttachment=e(this,"deleteAttachment",7),this.iconPack=i,this.t=c(),this.attachment=null,this.filePreview=null,this.fileReader=new FileReader,this.generatePreview=()=>{"image"===this.attachment.type?this.fileReader.readAsDataURL(this.attachment.file):"file"===this.attachment.type&&(this.filePreview=this.attachment.file.name)},this.onDeleteClickHandler=()=>{this.filePreview=null,this.onDeleteAttachment.emit()}}onAttachmentChange(){this.generatePreview()}connectedCallback(){this.fileReader.onload=t=>{"string"==typeof t.target.result&&(this.filePreview=t.target.result)}}componentWillLoad(){this.onAttachmentChange()}render(){return r(o,{key:"9ac12b9992619fe12ab30d07dfcd3113562e6d12"},r("div",{key:"3540e19bd3d7b5185c55359e128bdee18a31d32d",class:"preview-overlay"},r("div",{key:"2792a2f153702696ce4bb3803b6a401cb2075238",class:"preview"},r("dyte-tooltip",{key:"f1ae3139d0199a03a9e85a7366c766c8cb9f84b2",label:this.t("chat.cancel_upload")},r("dyte-button",{key:"99d6e020c4b7042a7f91861c799ff251193bd16c",variant:"secondary",kind:"icon",onClick:this.onDeleteClickHandler},r("dyte-icon",{key:"e8809cbd2ee916275de659a4eed986ab71351235",icon:this.iconPack.dismiss}))),"image"===this.attachment.type?r("img",{class:"preview-image",src:this.filePreview}):r("div",{class:"preview-file"},r("span",null,this.filePreview)))))}static get watchers(){return{attachment:["onAttachmentChange"]}}};n([a()],d.prototype,"iconPack",void 0),n([a()],d.prototype,"t",void 0),d.style=":host{display:flex;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-top-left-radius:var(--dyte-border-radius-md, 8px);border-top-right-radius:var(--dyte-border-radius-md, 8px)}.preview-overlay{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);background-color:inherit}.preview{position:absolute;top:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);max-width:-moz-fit-content;max-width:fit-content;max-height:var(--dyte-space-20, 80px)}.preview:hover dyte-tooltip{display:block}.preview dyte-tooltip{position:absolute;top:calc(var(--dyte-space-1, 4px) * -1);left:calc(var(--dyte-space-1, 4px) * -1);display:none;margin-left:calc(var(--dyte-space-1, 4px) * -1);margin-top:calc(var(--dyte-space-1, 4px) * -1)}.preview dyte-button{display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));border:1px solid rgb(var(--dyte-colors-text-1000, 255 255 255))}.preview dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.preview-image{height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);-o-object-fit:cover;object-fit:cover;max-height:100%;max-width:100%;overflow:clip;border-radius:var(--dyte-border-radius-md, 8px)}.preview-file{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:var(--dyte-border-radius-md, 8px);max-width:200px}";var s=function(t,e,r,o){var a,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,o);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(c=(i<3?a(c):i>3?a(e,r,c):a(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};const l=class{constructor(r){t(this,r),this.pickerClose=e(this,"pickerClose",7),this.emojiClicked=e(this,"dyteEmojiClicked",7),this.iconPack=i,this.t=c(),this.filterVal="",this.filteredEmojis=[]}componentWillLoad(){(async()=>(await fetch("https://cdn.dyte.in/assets/emojis-data.json")).json())().then((t=>{this.emojiList=t,this.handleInputChange({value:""})}))}handleInputChange(t){this.filterVal=t.value;const e=new RegExp(`([^,]*?${this.filterVal}[^,]*):(\\d+)`,"g");this.filteredEmojis=Array.from(this.emojiList.search.matchAll(e)).map((t=>({name:t[1],emoji:this.emojiList.emojis[t[2]]})))}handleEmojiClick(t){this.emojiClicked.emit(t)}mapEmojiList(){var t;return(null===(t=this.emojiList)||void 0===t?void 0:t.length)>0?r("div",{id:"loader"},r("dyte-spinner",{iconPack:this.iconPack})):r("div",{id:"emoji-grid",class:"scrollbar max-w-40"},this.filteredEmojis.map((t=>r("dyte-button",{key:`emoji-button-${t.name}`,class:"emoji",variant:"ghost",kind:"icon",title:t.name,onClick:()=>this.handleEmojiClick(t.emoji)},t.emoji))))}render(){return r(o,{key:"b17b48acdfac58eda53b28f1785809115172fc90"},r("div",{key:"e26f53ed92044ecdad71535745d51b8ac7c1d04e",class:"close-parent"},r("dyte-button",{key:"ac341792386866394d5c6d23790f0aec03f66f65",variant:"ghost",kind:"icon",class:"close",onClick:()=>{var t;return null===(t=this.pickerClose)||void 0===t?void 0:t.emit()},"aria-label":this.t("close")},r("dyte-icon",{key:"b1ebe07eaf85572389d9341fa5670c085bc8120b",icon:this.iconPack.dismiss}))),r("div",{key:"03d1365cc6f9274c1ef6cd590abfbd57027432b8",class:"emoji-parent"},r("input",{key:"1f05b7dbc0f4e1fe189d8dca8746d8007477bbde",value:this.filterVal,onInput:t=>this.handleInputChange(t.target),placeholder:this.t("search")}),this.mapEmojiList()))}};s([a()],l.prototype,"iconPack",void 0),s([a()],l.prototype,"t",void 0),l.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:100%}.emoji-parent{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-64, 256px);width:100%;max-width:640px;flex-direction:column;padding:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-0, 0px);-webkit-user-select:none;-moz-user-select:none;user-select:none;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.close-parent{display:flex;flex:1 1 0%;justify-content:flex-end;padding:var(--dyte-space-0, 0px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#emoji-grid{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;flex-direction:row;flex-wrap:wrap;overflow-x:hidden;overflow-y:scroll;height:100%;grid-auto-rows:minmax(min-content, max-content)}#loader{display:flex;height:100%;width:100%;align-items:center;justify-content:center}input{display:block;height:var(--dyte-space-8, 32px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:14px;border-width:var(--dyte-border-width-none, 0);border-style:solid;border-style:none;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-ring-opacity));--tw-ring-opacity:0.3}.emoji{height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);font-size:20px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}";var p=function(t,e,r,o){var a,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,o);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(c=(i<3?a(c):i>3?a(e,r,c):a(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};const b=class{constructor(e){t(this,e),this.iconPack=i,this.t=c()}render(){return r("dyte-tooltip",{key:"ed7771da8c8790052743bc9fe8da64c352b99826",label:this.t("chat.send_emoji")},r("dyte-button",{key:"16c59bbb9a708844c96569b89bbc246653c9d601",variant:"ghost",kind:"icon",class:{active:this.isActive},title:this.t("chat.send_emoji")},r("dyte-icon",{key:"27baf076cb231a538a31fd3759154a62d02c28b9",icon:this.iconPack.emoji_multiple})))}};p([a()],b.prototype,"iconPack",void 0),p([a()],b.prototype,"t",void 0),b.style=":host{}";var h=function(t,e,r,o){var a,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,o);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(c=(i<3?a(c):i>3?a(e,r,c):a(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};const y=class{constructor(r){t(this,r),this.onFileChange=e(this,"fileChange",7),this.icon="attach",this.iconPack=i,this.t=c(),this.uploadFile=()=>{const t=this.fileInputField;t.type="file",this.filter&&(t.accept=this.filter),t.onchange=t=>{const{validity:e,files:[r]}=t.target;e.valid&&this.onFileChange.emit(r)},t.click()}}connectedCallback(){this.fileInputField=document.createElement("input")}disconnectedCallback(){this.fileInputField=void 0}render(){const t=this.label||this.t("chat.send_file");return r("dyte-tooltip",{key:"334c14777babe9de198038dd3b37926176d1a08a",label:t},r("dyte-button",{key:"0bc4d797c62074d3ffe9531d04c9087b21b16e0f",variant:"ghost",kind:"icon",onClick:()=>this.uploadFile(),title:t},r("dyte-icon",{key:"99066f2ba8c7eb773b1e9d5d9895d340af1d11fe",icon:this.iconPack[this.icon]})))}};h([a()],y.prototype,"iconPack",void 0),h([a()],y.prototype,"t",void 0),y.style=":host{}";var f=function(t,e,r,o){var a,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,o);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(c=(i<3?a(c):i>3?a(e,r,c):a(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};const v=class{constructor(r){t(this,r),this.onTextChange=e(this,"textChange",7),this.disabled=!1,this.rateLimitBreached=!1,this.keyDownHandler=()=>{},this.iconPack=i,this.t=c(),this.maxLengthBreached=0,this.onInputHandler=()=>{const t=this.$textArea.value.trim();this.maybeResize(t),this.checkLength(t),this.onTextChange.emit(t)},this.maybeResize=t=>{const e=[...t.matchAll(/\n/g)].length;this.$textArea.style.height=`${Math.min(200,60+20*e)}px`}}componentDidLoad(){this.maxLength&&(this.$textArea.maxLength=this.maxLength);const t=this.$textArea.value.trim();""!==t&&this.maybeResize(t)}async setText(t,e=!1){this.$textArea.value=t,this.maybeResize(t),e&&this.$textArea.focus(),this.checkLength(t),this.onTextChange.emit(t)}checkLength(t){const e=t.length;e+10>=this.maxLength?this.maxLengthBreached=t.length:e+10<this.maxLength&&this.maxLengthBreached>0&&(this.maxLengthBreached=0)}render(){return r("div",{key:"23f7454735d4f6cb9d5478e5a02859acb25d0a72",class:"chat-input",part:"chat-input-container"},this.maxLengthBreached>0&&r("div",{key:"aba72987359b78b8beeb6c3425e31246e7a8f19b",class:"text-error "+(this.maxLengthBreached===this.maxLength?"breached":"")},r("dyte-icon",{key:"e897e6df63f2e68259eb6acbefb903e7055daa6a",id:"warning-indicator",icon:this.iconPack.warning,part:"warning-indicator"})," ",this.maxLengthBreached," / ",this.maxLength," ",this.t("chat.max_limit_warning")),this.rateLimitBreached&&r("div",{key:"01cafc9d8a55b86681afc77e62a658ced664b70b",class:"text-error breached"},r("dyte-icon",{key:"60147f16484b1952d5a9a33877082dce06d65373",id:"warning-indicator",icon:this.iconPack.warning,part:"warning-indicator"})," ",this.t("chat.rate_limit_error")),r("textarea",{key:"147d6e21e83ef6d3b6eee5eb0288d98ba9b59d95",ref:t=>this.$textArea=t,placeholder:this.placeholder,disabled:this.disabled,onInput:this.onInputHandler,onKeyDown:this.keyDownHandler,part:"chat-input",value:this.value}))}};f([a()],v.prototype,"iconPack",void 0),f([a()],v.prototype,"t",void 0),v.style=".chat-input {\n  position: relative;\n  z-index: 10;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  border-top-left-radius: var(--dyte-border-radius-md, 8px);\n  border-top-right-radius: var(--dyte-border-radius-md, 8px)\n}\n\n  .chat-input textarea {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));\n  box-sizing: border-box;\n  padding: var(--dyte-space-3, 12px);\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255))\n}\n\n  .chat-input textarea::-moz-placeholder {\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255))\n}\n\n  .chat-input textarea::placeholder {\n  color: rgb(var(--dyte-colors-text-1000, 255 255 255))\n}\n\n  .chat-input textarea {\n  font-family: var(--dyte-font-family, sans-serif);\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n  resize: none;\n  overflow-y: auto;\n  border-width: var(--dyte-border-width-none, 0);\n  border-style: none;\n  min-height: 60px;\n  font-size: 14px\n}\n\n@container chatcontainer (height < 360px) {\n  textarea {\n    height: 30px !important;\n    min-height: 30px !important\n  }\n}\n\n.text-error {\n  left: var(--dyte-space-0, 0px);\n  z-index: 10;\n  margin-top: var(--dyte-space-1, 4px);\n  margin-left: var(--dyte-space-1, 4px);\n  display: flex;\n  width: -moz-fit-content;\n  width: fit-content;\n  align-items: center;\n  justify-content: flex-start;\n  border-radius: var(--dyte-border-radius-sm, 4px);\n  --tw-border-opacity: 1;\n  border-color: rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-border-opacity));\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));\n  padding-left: var(--dyte-space-2, 8px);\n  padding-right: var(--dyte-space-2, 8px);\n  font-size: 12px;\n  font-weight: 600;\n  --tw-text-opacity: 1;\n  color: rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity));\n  border: 1px solid\n}\n\n#warning-indicator {\n  margin-right: var(--dyte-space-1, 4px);\n  height: var(--dyte-space-3, 12px);\n  width: var(--dyte-space-3, 12px)\n}\n\n.text-error.breached {\n  --tw-border-opacity: 1;\n  border-color: rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity));\n  --tw-text-opacity: 1;\n  color: rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))\n}";export{d as dyte_draft_attachment_view,l as dyte_emoji_picker,b as dyte_emoji_picker_button,y as dyte_file_picker_button,v as dyte_text_composer_view}