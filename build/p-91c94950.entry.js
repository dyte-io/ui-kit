import{r as t,h as s,a as i}from"./p-aff91b47.js";import"./p-c03ce358.js";import"./p-a03d57a1.js";import{g as e,p as a}from"./p-eace9744.js";import{d as r}from"./p-5a97005d.js";import{g as h,a as o}from"./p-a679ae56.js";import{u as n}from"./p-bd6bca51.js";import"./p-a6712bf4.js";import"./p-e497ad6d.js";import{d as c}from"./p-d5822e94.js";import"./p-ae02fe11.js";import"./p-bf38ee7f.js";import"./p-46923b34.js";import"./p-2c3cda13.js";const p=class{constructor(s){t(this,s),this.config=r,this.t=n(),this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.joinRoom=!0,this.isReady=!1,this.iconPack=c}async iconPackUrlChanged(t){this.iconPack=await h(t)}async meetingChanged(t){var s;if(t){if(!t.self.roomJoined&&this.joinRoom&&(this.isReady=!1,await t.joinRoom(),this.isReady=!0),this.loadConfigFromPreset&&null!=t.self.config){const s=t.self.config,{config:i}=e(s,t);this.config===r&&(this.config=Object.assign(Object.assign(Object.assign({},r),i),{designTokens:Object.assign(Object.assign({},r.designTokens),i.designTokens)}))}this.applyDesignSystem&&null!=(null===(s=this.config)||void 0===s?void 0:s.designTokens)&&"undefined"!=typeof document&&a(document.documentElement,this.config.designTokens),Array.from(this.hostEl.children).filter((t=>t.tagName.startsWith("DYTE-"))).forEach((s=>{s.meeting=t,s.config=this.config,s.size=this.size,s.iconPack=this.iconPack,s.t=this.t}))}}connectedCallback(){this.resizeObserver=new ResizeObserver((()=>this.handleResize())),this.resizeObserver.observe(this.hostEl),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl)}handleResize(){this.size=o(this.hostEl.clientWidth)}render(){return this.isReady?s("slot",null):null}get hostEl(){return i(this)}static get watchers(){return{iconPackUrl:["iconPackUrlChanged"],meeting:["meetingChanged"]}}};export{p as dyte_ui_provider}