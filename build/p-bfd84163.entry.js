import{r as t,h as i}from"./p-aff91b47.js";import"./p-a03d57a1.js";import{d as a}from"./p-5a97005d.js";import"./p-a6712bf4.js";import{d as e,b as s}from"./p-a58f1780.js";import"./p-e497ad6d.js";import{S as n}from"./p-dc76fcea.js";import"./p-ae02fe11.js";import"./p-bf38ee7f.js";var r=function(t,i,a,e){var s,n=arguments.length,r=n<3?i:null===e?e=Object.getOwnPropertyDescriptor(i,a):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,a,e);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(r=(n<3?s(r):n>3?s(i,a,r):s(i,a))||r);return n>3&&r&&Object.defineProperty(i,a,r),r};const c=class{constructor(i){t(this,i),this.config=a,this.iconPack=e,this.view="sidebar",this.t=s(),this.stageRequestedParticipants=[],this.updateStageRequestedParticipants=()=>{this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter((t=>"REQUESTED_TO_JOIN_STAGE"===t.stageStatus))},this.acceptStageRequest=async t=>{const{userId:i}=t;await this.meeting.stage.grantAccess([i]),this.updateStageRequestedParticipants()},this.rejectStageRequest=async t=>{const{userId:i}=t;await this.meeting.stage.denyAccess([i]),this.updateStageRequestedParticipants()},this.acceptAllStageRequest=async()=>{await this.meeting.stage.grantAccess(this.stageRequestedParticipants.map((t=>t.userId))),this.updateStageRequestedParticipants()},this.denyAllStageRequest=async()=>{var t;await(null===(t=this.meeting.stage)||void 0===t?void 0:t.denyAccess(this.stageRequestedParticipants.map((t=>t.userId)))),this.updateStageRequestedParticipants()},this.shouldShowStageRequests=()=>this.meeting.self.permissions.stageEnabled&&this.meeting.self.permissions.acceptStageRequests&&this.stageRequestedParticipants.length>0,this.updateRequestList=async t=>{var i,a,e,s,n,r,c;this.meeting.self.permissions.acceptStageRequests&&this.meeting.self.permissions.stageEnabled?"LIVESTREAM"===this.meeting.meta.viewType||"HIVE"===(null===(e=null===(a=null===(i=this.meeting)||void 0===i?void 0:i.self)||void 0===a?void 0:a.permissions)||void 0===e?void 0:e.mediaRoomType)?(t||(t=null!==(r=null===(n=await(null===(s=this.meeting.stage)||void 0===s?void 0:s.getAccessRequests()))||void 0===n?void 0:n.stageRequests)&&void 0!==r?r:[]),this.stageRequestedParticipants=t.map((t=>Object.assign(Object.assign({},t),{name:t.displayName})))):this.stageRequestedParticipants=null===(c=[this.meeting.self,...this.meeting.participants.joined.toArray()])||void 0===c?void 0:c.filter((t=>"REQUESTED_TO_JOIN_STAGE"===t.stageStatus)):this.stageRequestedParticipants=[]}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){const{stage:t}=this.meeting;null==t||t.removeListener("stageAccessRequestUpdate",this.updateRequestList)}meetingChanged(t){var i;null!=t&&(this.updateRequestList(),null===(i=t.stage)||void 0===i||i.on("stageAccessRequestUpdate",this.updateRequestList))}render(){if("sidebar"===this.view&&this.shouldShowStageRequests())return i("div",{class:"stage-requested-participants"},i("div",{class:"heading-count",part:"staged-heading-count"},this.t("stage_request.header_title")," (",this.stageRequestedParticipants.length,")"),i("ul",{class:"participants",part:"staged-participants"},this.stageRequestedParticipants.map((t=>i("li",{class:"waiting-participant",key:t.id},i("div",{class:"participant-details"},i("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),i("p",{class:"name",title:t.name},t.name)),i("div",{class:"waitlist-controls"},i("dyte-tooltip",{label:this.t("stage_request.deny_request"),variant:"secondary"},i("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.rejectStageRequest(t)},i("dyte-icon",{class:"deny",icon:this.iconPack.dismiss}))),i("dyte-tooltip",{label:this.t("stage_request.accept_request"),variant:"secondary"},i("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.acceptStageRequest(t)},i("dyte-icon",{class:"accept",icon:this.iconPack.checkmark})))))))),i("div",{class:"bulk-actions"},i("dyte-button",{class:"accept-all-button",variant:"secondary",onClick:this.acceptAllStageRequest},this.t("stage_request.accept_all")),i("dyte-button",{class:"deny-all-button",variant:"danger",onClick:this.denyAllStageRequest},this.t("stage_request.deny_all"))))}static get watchers(){return{meeting:["meetingChanged"]}}};r([n()],c.prototype,"meeting",void 0),r([n()],c.prototype,"iconPack",void 0),r([n()],c.prototype,"t",void 0),c.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:column;font-size:14px}.stage-requested-participants{margin-bottom:var(--dyte-space-8, 32px)}.stage-requested-participants .bulk-actions{display:flex;gap:var(--dyte-space-2, 8px)}.stage-requested-participants .bulk-actions .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.stage-requested-participants .bulk-actions dyte-button{flex:1 1 0%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}";export{c as dyte_participants_stage_queue}