import{r as t,h as i,a as s}from"./p-aff91b47.js";import{d as e}from"./p-a08b5a59.js";import"./p-2c3cda13.js";const h=class{constructor(i){t(this,i),this.items=[],this.itemHeight=55,this.bufferedItemsCount=5,this.emptyListElement=null,this.visibleStart=0,this.visibleEnd=0,this.containerHeight=0,this.lastScrollTop=0,this.recalculatePositioning=()=>{this.updateContainerHeight(),requestAnimationFrame((()=>{this.updateItemHeight()}))},this.updateContainerHeight=()=>{this.el.querySelector(".virtual-list-container").clientHeight&&(requestAnimationFrame((()=>{this.updateItemHeight()})),this.containerHeight=this.el.querySelector(".virtual-list-container").clientHeight,this.updateVisibleRange())},this.onScroll=e((()=>{const t=this.el.querySelector(".virtual-list-container").scrollTop;t>this.lastScrollTop&&this.visibleEnd===this.items.length||(this.lastScrollTop=t,this.updateVisibleRange())}))}itemsChanged(){this.recalculatePositioning()}componentDidLoad(){this.recalculatePositioning(),this.el.querySelector(".virtual-list-container").addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.recalculatePositioning)}componentDidUpdate(){this.updateItemHeight()}disconnectedCallback(){this.el.querySelector(".virtual-list-container").removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.recalculatePositioning)}updateVisibleRange(){const t=this.el.querySelector(".virtual-list-container").scrollTop,i=Math.floor(t/this.itemHeight),s=Math.ceil(this.containerHeight/this.itemHeight),e=Math.min(this.items.length,i+s+this.bufferedItemsCount);this.visibleStart=i,this.visibleEnd=e,this.el.querySelector(".virtual-list-container").scrollTop=this.lastScrollTop}updateItemHeight(){const t=this.el.querySelector(".virtual-list-item");if(t){const i=t.style.height;t.style.height="auto";const s=t.getBoundingClientRect().height;i&&(t.style.height=i),s&&Math.floor(s)!==Math.floor(this.itemHeight)&&(this.itemHeight=s)}}renderItems(){return this.items.slice(this.visibleStart,this.visibleEnd).map(((t,s)=>{const e=this.visibleStart+s;return i("div",{class:"virtual-list-item",key:t.id,style:{position:"absolute",top:e*this.itemHeight+"px",height:`${this.itemHeight}px`,width:"100%"}},this.renderItem(t,e))}))}render(){var t;return i("div",{key:"e20e2b8bf9683a0b129e8e814f19a82caaa74f3e",class:"virtual-list-container",style:{position:"relative",height:"100%",overflowX:"hidden",overflowY:"auto"}},i("div",{key:"33e4567b7f045eabb0e1ccc26824b9e51d939541",style:{height:this.items.length*this.itemHeight+"px",position:"relative"}},(null===(t=this.items)||void 0===t?void 0:t.length)?this.renderItems():this.emptyListElement),i("div",{key:"a6beddc67166e0703cd38ff3289a1fc8074e01c5",style:{height:`${this.itemHeight}px`}}))}get el(){return s(this)}static get watchers(){return{items:["itemsChanged"]}}};h.style=":host{height:100%;width:100%}";export{h as dyte_virtualized_participant_list}