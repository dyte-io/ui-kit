import{r as t,c as i,h as e,H as a,a as s}from"./p-aff91b47.js";import{a as n,c,d as r,F as o}from"./p-8e40fcf4.js";import{l as d,R as h}from"./p-fd4b6d8b.js";import{f as p,s as l}from"./p-338c7261.js";import{c as y,b as g,o as f,s as v,h as b}from"./p-31964573.js";import{S as u}from"./p-961bba4b.js";var m=function(t,i,e,a){var s,n=arguments.length,c=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,e,a);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(i,e,c):s(i,e))||c);return n>3&&c&&Object.defineProperty(i,e,c),c};const x=class{constructor(e){t(this,e),this.dyteSendNotification=i(this,"dyteSendNotification",7),this.pinnedListener=({isPinned:t})=>{this.isPinned=t},this.toggleTileListener=({hidden:t})=>{this.isHidden=t},this.stageListener=({stageStatus:t})=>{this.isOnStage="ON_STAGE"===t},this.view="sidebar",this.iconPack=n,this.t=c(),this.config=r,this.audioEnabled=!1,this.videoEnabled=!1,this.isPinned=!1,this.isHidden=!1,this.isOnStage=!1,this.canDisableParticipantAudio=!1,this.canDisableParticipantVideo=!1,this.canKickParticipant=!1,this.canPinParticipant=!1,this.canAllowParticipantOnStage=!1,this.menuOpen=!1,this.permissionsUpdateListener=()=>{this.meetingChanged(this.meeting)},this.inviteToStageToggle=async()=>{const t=this.participant,{stage:i}=this.meeting;"ACCEPTED_TO_JOIN_STAGE"!==t.stageStatus?(this.isOnStage?(t.isPinned&&t.unpin(),await i.kick([t.userId])):(await i.grantAccess([t.userId]),this.dyteSendNotification.emit({message:`${t.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-invite-${t.id}`})),this.isOnStage="ON_STAGE"===t.stageStatus):this.dyteSendNotification.emit({message:`${t.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-${t.id}`})},this.handleOutsideClick=t=>{!t.composedPath().includes(this.host)&&this.menuOpen&&(this.menuOpen=!1)},this.update=()=>{const t=this.host.shadowRoot.getElementById("trigger"),i=this.host.shadowRoot.getElementById("menu-list");y(t,i,{placement:"bottom-end",middleware:[g({allowedPlacements:["bottom-end","top-end"],alignment:"end"}),f(4),v({padding:8}),b()]}).then((({x:t,y:e,placement:a})=>{let s=null;s="bottom-end"===a?{right:`${t}px`,top:`${e}px`}:{right:`${t}px`,bottom:`${e}px`},Object.assign(i.style,s)}))},this.onMenuToggle=()=>{this.menuOpen=!this.menuOpen,this.menuOpen&&this.update()}}connectedCallback(){this.meetingChanged(this.meeting),this.participantChanged(this.participant),document.addEventListener("click",this.handleOutsideClick)}disconnectedCallback(){var t;document.removeEventListener("click",this.handleOutsideClick),null===(t=this.meeting)||void 0===t||t.self.permissions.removeListener("permissionsUpdate",this.permissionsUpdateListener),null!=this.participant&&null!=this.participant.removeListener&&(this.audioUpdateListener&&this.participant.removeListener("audioUpdate",this.audioUpdateListener),this.videoUpdateListener&&this.participant.removeListener("videoUpdate",this.videoUpdateListener),this.participant.removeListener("pinned",this.pinnedListener),this.participant.removeListener("unpinned",this.pinnedListener),this.participant.removeListener("stageStatusUpdate",this.stageListener),this.participant.removeListener("toggleTile",this.toggleTileListener))}meetingChanged(t){var i,e,a,s,n,c,r;if(null!=t){const{self:d}=t;this.canDisableParticipantAudio=d.permissions.canAllowParticipantAudio||d.permissions.canDisableParticipantAudio,this.canDisableParticipantVideo=d.permissions.canAllowParticipantVideo||d.permissions.canDisableParticipantVideo,this.canKickParticipant=d.permissions.kickParticipant&&!0!==(null===(i=this.meeting)||void 0===i?void 0:i.__internals__.features.hasFeature(o.DISABLE_KICKING))&&(!0!==(null===(e=this.meeting)||void 0===e?void 0:e.__internals__.features.hasFeature(o.ADMIN_CANTREMOVE_ADMIN))||"webinar_admin"!==(null===(a=this.participant)||void 0===a?void 0:a.presetName)),this.canPinParticipant=d.permissions.pinParticipant,this.canAllowParticipantOnStage=d.permissions.acceptStageRequests&&d.permissions.stageEnabled&&(!0!==(null===(s=this.meeting)||void 0===s?void 0:s.__internals__.features.hasFeature(o.ADMIN_CANTREMOVE_ADMIN))||"webinar_admin"!==(null===(n=this.participant)||void 0===n?void 0:n.presetName))&&(!0!==(null===(c=this.meeting)||void 0===c?void 0:c.__internals__.features.hasFeature(o.CANTINVITE_VIEWER))||"webinar_viewer"!==(null===(r=this.participant)||void 0===r?void 0:r.presetName)),t.self.permissions.addListener("permissionsUpdate",this.permissionsUpdateListener)}}participantChanged(t){var i;if(null!=t){if(this.audioEnabled=t.audioEnabled,this.videoEnabled=t.videoEnabled,this.isPinned=t.isPinned,this.isHidden=null!==(i=t.hidden)&&void 0!==i&&i,this.isOnStage="ON_STAGE"===t.stageStatus,this.audioUpdateListener=({audioEnabled:t})=>{this.audioEnabled=t},this.videoUpdateListener=({videoEnabled:t})=>{this.videoEnabled=t},null==t.addListener)return;t.addListener("audioUpdate",this.audioUpdateListener),t.addListener("videoUpdate",this.videoUpdateListener),t.addListener("pinned",this.pinnedListener),t.addListener("unpinned",this.pinnedListener),t.addListener("stageStatusUpdate",this.stageListener),this.participant.addListener("toggleTile",this.toggleTileListener)}}render(){var t,i,s,n,c,r,o,y,g;const f="AUDIO_ROOM"===(null===(t=this.meeting)||void 0===t?void 0:t.meta.viewType),v=(null===(i=this.meeting)||void 0===i?void 0:i.self.id)===this.participant.id,b=this.canDisableParticipantAudio&&this.audioEnabled||this.canDisableParticipantVideo&&this.videoEnabled&&!f||this.canKickParticipant||this.canPinParticipant&&this.isOnStage||this.canAllowParticipantOnStage,u=p((null===(s=this.participant)||void 0===s?void 0:s.name)||""),m=this.isOnStage||["GROUP_CALL","AUDIO_ROOM"].includes(null===(n=this.meeting)||void 0===n?void 0:n.meta.viewType),x={meeting:this.meeting,size:"sm",states:this.states,config:this.config,iconPack:this.iconPack,t:this.t};return e(a,{key:"6d2a340a09306d4981227b3048faeed243a14cce"},e("div",{class:"left",key:null===(c=this.participant)||void 0===c?void 0:c.id},e("dyte-avatar",{key:"bc8453dc32910051b58cf61fdd282a32955d1612",participant:this.participant,size:"sm",iconPack:this.iconPack,t:this.t}),e("p",{key:"ca4a796d5354d0fbe8d3358a321245a3d841a3f1",class:"name",title:u},l(u,16)," ",(null===(r=this.meeting)||void 0===r?void 0:r.self.id)===(null===(o=this.participant)||void 0===o?void 0:o.id)&&this.t("(you)"))),"sidebar"===this.view&&e("div",{key:"febaee3e2c6c2fd398d1fb05f846fbef796d73fd",class:"right"},m&&e("dyte-icon",{key:"7eeb84f4a67cd6fdc4b2175ac5de5e32afd50486",class:{red:!this.audioEnabled},icon:this.audioEnabled?this.iconPack.mic_on:this.iconPack.mic_off}),m&&!f&&e("dyte-icon",{key:"21aaa6cca2ed53deb8b1276f8f1786c1089e2dd6",class:{red:!this.videoEnabled},icon:this.videoEnabled?this.iconPack.video_on:this.iconPack.video_off}),(b||d({element:"dyte-participant",defaults:x,childProps:{participant:this.participant}})>0)&&e("div",{key:"6c7cc6c9a02e83fb1c87416b601dd1e016c3a549",class:"menu"},e("span",{key:"0dc87f46b4f0ceb1100a1a204f3b0dc92e042b12",id:"trigger",onClick:this.onMenuToggle},e("dyte-button",{key:"6e15059d18d929005ec8c820011de9046d69c5c6",variant:"ghost",kind:"icon",slot:"trigger"},e("dyte-icon",{key:"2424eb5e59c79fff940435486befc709b24dd5f5",class:"more",icon:this.iconPack.more_vertical}))),e("span",{key:"972e9250b7b434b1a6673b3924563535def9f114",id:"menu-list"},this.menuOpen&&e("dyte-menu-list",{key:"eb12f27f3eec66530257a9dc653f049a9b691569",iconPack:this.iconPack,t:this.t},this.canPinParticipant&&m&&!f&&e("dyte-menu-item",{key:"6fd8046b97eb6d97a872cf9b6b8d550d853aeaed",onClick:()=>{this.isPinned?this.participant.unpin():this.participant.pin()},iconPack:this.iconPack,t:this.t},e("dyte-icon",{key:"80f2a8d9b3a6ec7c4da6ca162865b296949ab07b",icon:this.isPinned?this.iconPack.pin_off:this.iconPack.pin,slot:"start"}),this.t(this.isPinned?"unpin":"pin")),v&&e("dyte-menu-item",{key:"e784419ef130de759f507650de1bc92c6ac07c2a",iconPack:this.iconPack,t:this.t,onClick:()=>{this.isHidden?this.participant.show():this.participant.hide()}},e("dyte-icon",{key:"b349973219fb497d83b2a8852da0fc8558a1a51c",icon:this.isHidden?this.iconPack.minimize:this.iconPack.maximize,slot:"start"}),this.t(this.meeting.self.hidden?"maximize":"minimize")),this.canDisableParticipantAudio&&m&&this.audioEnabled&&e("dyte-menu-item",{key:"a6aa845f9ed193e7aaecb8dfc13390b2aab672c3",iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableAudio()}},e("dyte-icon",{key:"e0ac24333a670684d60802edc085c0eb918571c0",icon:this.iconPack.mic_off,slot:"start"}),this.t("mute")),this.canDisableParticipantVideo&&m&&this.videoEnabled&&e("dyte-menu-item",{key:"07ec0b852abd9dc7739343ce5953fbdc8c4e9408",iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableVideo()}},e("dyte-icon",{key:"1cccc03618c740983971502a9bbb50ab86947170",icon:this.iconPack.video_off,slot:"start"}),this.t("participants.turn_off_video")),this.canAllowParticipantOnStage&&(null===(y=this.participant)||void 0===y?void 0:y.id)!==(null===(g=this.meeting)||void 0===g?void 0:g.self.id)&&e("dyte-menu-item",{key:"2ee271afaf0b99eb6b793abe337777251b4d2ce8",iconPack:this.iconPack,t:this.t,class:this.isOnStage?"red":"",onClick:this.inviteToStageToggle},e("dyte-icon",{key:"3734c9fa9bb9654d2c7d1b75bf53ad051020a88d",icon:this.isOnStage?this.iconPack.leave_stage:this.iconPack.join_stage,slot:"start"}),this.t(this.isOnStage?"stage.remove_from_stage":"stage.add_to_stage")),!v&&this.canKickParticipant&&e("dyte-menu-item",{key:"2ecb4ee36b844bd605c72a13049d1508d6bc9e62",iconPack:this.iconPack,t:this.t,class:"red",onClick:()=>{var t,i;null===(t=this.meeting)||void 0===t||t.participants.kick(null===(i=this.participant)||void 0===i?void 0:i.id)}},e("dyte-icon",{key:"1e328de97168baf6c5bf66eb56eb3c6017ff4f90",icon:this.iconPack.dismiss,slot:"start"}),this.t("kick")),e("slot",{key:"73c6d605b84d57666f083484660f269a8bc9b36e"},e(h,{key:"8dbbbf398d6ff4cd6d98d353ebb31326e99f4742",element:"dyte-participant",defaults:x,childProps:{participant:this.participant},deepProps:!0,onlyChildren:!0})))))))}get host(){return s(this)}static get watchers(){return{meeting:["meetingChanged"],participant:["participantChanged"]}}};m([u()],x.prototype,"meeting",void 0),m([u()],x.prototype,"states",void 0),m([u()],x.prototype,"iconPack",void 0),m([u()],x.prototype,"t",void 0),x.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;height:var(--dyte-space-14, 56px);align-items:center;justify-content:space-between;cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);font-size:14px}.left{display:flex;align-items:center}.left>*{margin-right:var(--dyte-space-2, 8px)}.left>*:last-child{margin-right:var(--dyte-space-0, 0px)}.right{display:flex;align-items:center;justify-content:flex-end}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}dyte-icon.red{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.more{cursor:pointer}.menu{position:relative;display:inline-block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#menu-list{position:absolute;top:var(--dyte-space-8, 32px) !important;right:var(--dyte-space-4, 16px) !important;z-index:20}";var w=function(t,i,e,a){var s,n=arguments.length,c=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,e,a);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(i,e,c):s(i,e))||c);return n>3&&c&&Object.defineProperty(i,e,c),c};const k=class{constructor(i){t(this,i),this.config=r,this.hideHeader=!1,this.iconPack=n,this.view="sidebar",this.t=c(),this.search="",this.participants=[],this.createParticipantNode=t=>{const i={meeting:this.meeting,view:this.view,t:this.t,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack};return e("div",null,e(h,{element:"dyte-participant",defaults:i,props:{role:"listitem",participant:t,key:t.id},childProps:Object.assign(Object.assign({},i),{participant:t,size:this.size}),deepProps:!0}))},this.updateStageList=()=>{this.getParticipants(this.search)}}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){const{participants:t,stage:i}=this.meeting;null!=this.meeting&&(this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),t.joined.removeListener("stageStatusUpdate",this.updateStageList),null==i||i.removeListener("stageStatusUpdate",this.updateStageList))}meetingChanged(t){null!=t&&(this.participantJoinedListener=t=>{if("ON_STAGE"!==t.stageStatus)return;const i=this.search.toLowerCase();t.name.toLowerCase().includes(i)&&t.id.toLowerCase().includes(i)&&(this.participants=[...this.participants.filter((i=>i.id!==t.id)),t])},this.participantLeftListener=t=>{this.participants=this.participants.filter((i=>i.id!==t.id))},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),this.updateStageList(),null==t||t.participants.joined.on("stageStatusUpdate",this.updateStageList),null==t||t.stage.on("stageStatusUpdate",this.updateStageList))}searchChanged(t){this.getParticipants(t)}getParticipants(t=this.search){let i="ON_STAGE"===this.meeting.stage.status?[this.meeting.self]:[];i=[...i,...this.meeting.participants.joined.toArray().filter((t=>"ON_STAGE"===t.stageStatus))],this.participants=""===t?i:i.filter((i=>{var e;return(null!==(e=i.name)&&void 0!==e?e:i.id).toLowerCase().includes(t.toLowerCase())}))}render(){return e(a,{key:"1cfe52f6c91528ce8d5e733beba07f1bb7d3e080"},e("div",{key:"5883133588f2b11d045244d30b5a0fa118dd4d4c",class:"participants-container"},!this.hideHeader&&e("div",{key:"5bc3c5b64c68496d32abd2e8921c45c0a1c078a5",class:"heading-count",part:"heading-count"},this.t("participants")," (",this.participants.length,")"),e("dyte-virtualized-participant-list",{key:"4e709fdb9c5b04920f9ce06a7ca359e6c57d84e5",items:this.participants,renderItem:this.createParticipantNode,part:"participants",class:"participants",emptyListElement:e("div",{class:"empty-stage-list"},this.t(this.search.length>0?"search.could_not_find":"search.empty"))})))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};w([u()],k.prototype,"meeting",void 0),w([u()],k.prototype,"states",void 0),w([u()],k.prototype,"size",void 0),w([u()],k.prototype,"iconPack",void 0),w([u()],k.prototype,"t",void 0),k.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.participants-container{margin-bottom:var(--dyte-space-4, 16px);height:100%;width:100%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-stage-list{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-participant{width:100%}";var _=function(t,i,e,a){var s,n=arguments.length,c=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,e,a);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(i,e,c):s(i,e))||c);return n>3&&c&&Object.defineProperty(i,e,c),c};const C=class{constructor(i){t(this,i),this.config=r,this.iconPack=n,this.view="sidebar",this.t=c(),this.stageRequestedParticipants=[],this.updateStageRequestedParticipants=()=>{this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter((t=>"REQUESTED_TO_JOIN_STAGE"===t.stageStatus))},this.acceptStageRequest=async t=>{const{userId:i}=t;await this.meeting.stage.grantAccess([i]),this.updateStageRequestedParticipants()},this.rejectStageRequest=async t=>{const{userId:i}=t;await this.meeting.stage.denyAccess([i]),this.updateStageRequestedParticipants()},this.acceptAllStageRequest=async()=>{await this.meeting.stage.grantAccess(this.stageRequestedParticipants.map((t=>t.userId))),this.updateStageRequestedParticipants()},this.denyAllStageRequest=async()=>{var t;await(null===(t=this.meeting.stage)||void 0===t?void 0:t.denyAccess(this.stageRequestedParticipants.map((t=>t.userId)))),this.updateStageRequestedParticipants()},this.shouldShowStageRequests=()=>this.meeting.self.permissions.stageEnabled&&this.meeting.self.permissions.acceptStageRequests&&this.stageRequestedParticipants.length>0,this.updateRequestList=async t=>{var i,e,a,s,n,c,r;this.meeting.self.permissions.acceptStageRequests&&this.meeting.self.permissions.stageEnabled?"LIVESTREAM"===this.meeting.meta.viewType||"HIVE"===(null===(a=null===(e=null===(i=this.meeting)||void 0===i?void 0:i.self)||void 0===e?void 0:e.permissions)||void 0===a?void 0:a.mediaRoomType)?(t||(t=null!==(c=null===(n=await(null===(s=this.meeting.stage)||void 0===s?void 0:s.getAccessRequests()))||void 0===n?void 0:n.stageRequests)&&void 0!==c?c:[]),this.stageRequestedParticipants=t.map((t=>Object.assign(Object.assign({},t),{name:t.displayName})))):this.stageRequestedParticipants=null===(r=[this.meeting.self,...this.meeting.participants.joined.toArray()])||void 0===r?void 0:r.filter((t=>"REQUESTED_TO_JOIN_STAGE"===t.stageStatus)):this.stageRequestedParticipants=[]}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){const{stage:t}=this.meeting;null==t||t.removeListener("stageAccessRequestUpdate",this.updateRequestList)}meetingChanged(t){var i;null!=t&&(this.updateRequestList(),null===(i=t.stage)||void 0===i||i.on("stageAccessRequestUpdate",this.updateRequestList))}render(){if("sidebar"===this.view&&this.shouldShowStageRequests())return e("div",{class:"stage-requested-participants"},e("div",{class:"heading-count",part:"staged-heading-count"},this.t("stage_request.header_title")," (",this.stageRequestedParticipants.length,")"),e("ul",{class:"participants",part:"staged-participants"},this.stageRequestedParticipants.map((t=>e("li",{class:"waiting-participant",key:t.id},e("div",{class:"participant-details"},e("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),e("p",{class:"name",title:t.name},t.name)),e("div",{class:"waitlist-controls"},e("dyte-tooltip",{label:this.t("stage_request.deny_request"),variant:"secondary"},e("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.rejectStageRequest(t)},e("dyte-icon",{class:"deny",icon:this.iconPack.dismiss}))),e("dyte-tooltip",{label:this.t("stage_request.accept_request"),variant:"secondary"},e("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.acceptStageRequest(t)},e("dyte-icon",{class:"accept",icon:this.iconPack.checkmark})))))))),e("div",{class:"bulk-actions"},e("dyte-button",{class:"accept-all-button",variant:"secondary",onClick:this.acceptAllStageRequest},this.t("stage_request.accept_all")),e("dyte-button",{class:"deny-all-button",variant:"danger",onClick:this.denyAllStageRequest},this.t("stage_request.deny_all"))))}static get watchers(){return{meeting:["meetingChanged"]}}};_([u()],C.prototype,"meeting",void 0),_([u()],C.prototype,"size",void 0),_([u()],C.prototype,"iconPack",void 0),_([u()],C.prototype,"t",void 0),C.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:column;font-size:14px}.stage-requested-participants{margin-bottom:var(--dyte-space-8, 32px)}.stage-requested-participants .bulk-actions{display:flex;gap:var(--dyte-space-2, 8px)}.stage-requested-participants .bulk-actions .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.stage-requested-participants .bulk-actions dyte-button{flex:1 1 0%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}";var j=function(t,i,e,a){var s,n=arguments.length,c=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,e,a);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(i,e,c):s(i,e))||c);return n>3&&c&&Object.defineProperty(i,e,c),c};const O=class{constructor(i){t(this,i),this.updateStageViewers=()=>{this.getViewers(this.search)},this.config=r,this.hideHeader=!1,this.iconPack=n,this.view="sidebar",this.search="",this.t=c(),this.stageViewers=[],this.createParticipantNode=t=>e("dyte-participant",{role:"listitem",key:t.id,meeting:this.meeting,participant:t,view:this.view,iconPack:this.iconPack,config:this.config,t:this.t}),this.shouldShowViewers=()=>{var t,i,e;return null===(e=null===(i=null===(t=this.meeting)||void 0===t?void 0:t.self)||void 0===i?void 0:i.permissions)||void 0===e?void 0:e.stageEnabled}}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}meetingChanged(t){null!=t&&(this.participantJoinedListener=t=>{if("ON_STAGE"===t.stageStatus)return;const i=this.search.toLowerCase();i.length>0&&!t.name.toLowerCase().includes(i)||(this.stageViewers=[...this.stageViewers.filter((i=>i.id!==t.id)),t])},this.participantLeftListener=t=>{this.stageViewers=this.stageViewers.filter((i=>i.id!==t.id))},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.participants.joined.on("stageStatusUpdate",this.updateStageViewers),t.stage.on("stageStatusUpdate",this.updateStageViewers))}searchChanged(t){this.getViewers(t)}disconnectedCallback(){const{participants:t,stage:i}=this.meeting;this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),t.joined.removeListener("stageStatusUpdate",this.updateStageViewers),i.removeListener("stageStatusUpdate",this.updateStageViewers)}getViewers(t){let i="ON_STAGE"===this.meeting.stage.status?[]:[this.meeting.self];i=[...i,...this.meeting.participants.joined.toArray()].filter((t=>"ON_STAGE"!==t.stageStatus)),this.stageViewers=""===t?i:i.filter((i=>{var e;return(null!==(e=i.name)&&void 0!==e?e:i.id).toLowerCase().includes(t.toLowerCase())}))}render(){if("sidebar"===this.view&&this.shouldShowViewers())return e("div",{class:"list"},!this.hideHeader&&e("div",{class:"heading-count",part:"heading-count"},this.t("viewers")," (",this.stageViewers.length,")"),e("dyte-virtualized-participant-list",{items:this.stageViewers,renderItem:this.createParticipantNode,class:"participants",part:"participants",style:{height:"100%"},emptyListElement:e("div",{class:"empty-viewers-list"},this.t(this.search.length>0?"participants.errors.empty_results":"participants.empty_list"))}))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};j([u()],O.prototype,"meeting",void 0),j([u()],O.prototype,"size",void 0),j([u()],O.prototype,"iconPack",void 0),j([u()],O.prototype,"t",void 0),O.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}.list{margin-bottom:var(--dyte-space-4, 16px);display:flex;height:100%;flex-direction:column}h3,.heading-count{margin:var(--dyte-space-0, 0px);align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-viewers-list{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}";var z=function(t,i,e,a){var s,n=arguments.length,c=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,e,a);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(i,e,c):s(i,e))||c);return n>3&&c&&Object.defineProperty(i,e,c),c};const E=class{constructor(i){t(this,i),this.config=r,this.iconPack=n,this.view="sidebar",this.t=c(),this.acceptWaitingRoomRequest=async t=>{await this.meeting.participants.acceptWaitingRoomRequest(t)},this.waitlistedParticipants=[],this.acceptAllWaitingRoomRequests=async()=>{await this.meeting.participants.acceptAllWaitingRoomRequest(this.waitlistedParticipants.map((t=>t.id)))},this.rejectWaitingRoomRequest=async t=>{await this.meeting.participants.rejectWaitingRoomRequest(t)},this.shouldShowWaitlist=()=>"LIVESTREAM"!==this.meeting.meta.viewType&&this.meeting.self.permissions.acceptWaitingRequests&&0!==this.waitlistedParticipants.length}disconnectedCallback(){const{participants:t}=this.meeting;this.waitlistedParticipantJoinedListener&&t.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&t.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener),this.waitlistedParticipantsClearedListener&&t.waitlisted.removeListener("participantsCleared",this.waitlistedParticipantsClearedListener)}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){null!=t&&(this.waitlistedParticipants=t.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=t=>{this.waitlistedParticipants.some((i=>i.id===t.id))||(this.waitlistedParticipants=[...this.waitlistedParticipants,t])},this.waitlistedParticipantLeftListener=t=>{this.waitlistedParticipants=this.waitlistedParticipants.filter((i=>i.id!==t.id))},this.waitlistedParticipantsClearedListener=()=>{this.waitlistedParticipants=[]},t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),t.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener),t.participants.waitlisted.addListener("participantsCleared",this.waitlistedParticipantsClearedListener))}render(){if("sidebar"===this.view&&this.shouldShowWaitlist())return e("div",{class:"waiting-participants"},e("div",{class:"heading-count",part:"waitlisted-heading-count"},this.t("waitlist.header_title")," (",this.waitlistedParticipants.length,")"),e("ul",{class:"participants",part:"waitlisted-participants"},this.waitlistedParticipants.map((t=>e("li",{class:"waiting-participant",key:t.id},e("div",{class:"participant-details"},e("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),e("p",{class:"name",title:t.name},t.name)),e("div",{class:"waitlist-controls"},e("dyte-tooltip",{label:this.t("waitlist.deny_request"),variant:"secondary"},e("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.rejectWaitingRoomRequest(t.id)},e("dyte-icon",{class:"deny",icon:this.iconPack.dismiss}))),e("dyte-tooltip",{label:this.t("waitlist.accept_request"),variant:"secondary"},e("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.acceptWaitingRoomRequest(t.id)},e("dyte-icon",{class:"accept",icon:this.iconPack.checkmark})))))))),e("dyte-button",{class:"accept-all-button",variant:"secondary",kind:"wide",onClick:this.acceptAllWaitingRoomRequests},this.t("waitlist.accept_all")))}static get watchers(){return{meeting:["meetingChanged"]}}};z([u()],E.prototype,"meeting",void 0),z([u()],E.prototype,"size",void 0),z([u()],E.prototype,"iconPack",void 0),z([u()],E.prototype,"t",void 0),E.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-4, 16px);margin-bottom:calc(var(--dyte-space-2, 8px) * -1);display:flex;width:100%;flex-direction:column;font-size:14px}.waiting-participants{margin-bottom:var(--dyte-space-8, 32px)}.waiting-participants .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}";const S=class{constructor(e){t(this,e),this.tabChange=i(this,"tabChange",7),this.sidebarClose=i(this,"sidebarClose",7),this.view="sidebar",this.tabs=[],this.hideHeader=!1,this.hideCloseAction=!1,this.iconPack=n,this.t=c(),this.onClose=()=>{this.sidebarClose.emit()}}render(){const t="full-screen"===this.view,i=this.tabs.find((t=>t.id===this.currentTab));return e(a,{key:"3cc819dfdd7a7afb27c4d5c0caad190e744416e5",class:this.view},!this.hideCloseAction&&e("dyte-button",{key:"49f610426277037837150d9b5f732c86a8a008df",variant:"ghost",kind:"icon",class:"close",onClick:this.onClose,"aria-label":this.t("close")},e("dyte-icon",{key:"6c5f8cbb8d2e4b12e2e924aa7881811a5c6afa32",icon:this.iconPack.dismiss})),i&&!this.hideHeader&&e("header",{key:"f55415f94849e74606dd21973822dd9495d01327",class:"main-header"},e("h3",{key:"f240ff5fa5fe71e83d1c43ab705ec75903720c89"},i.name),e("slot",{key:"f4d05f1edd487c5d1c731914b94dae796cf1daf6",name:"pinned-state"})),t&&e("header",{key:"9a782da10bf0f63523ef96a5bd98708853489beb",class:"mobile-tabs"},this.tabs.map((t=>e("button",{onClick:()=>{this.tabChange.emit(t.id)},class:{active:this.currentTab===t.id}},t.name)))),e("slot",{key:"2656a53d4f0ce0c8b4001292b667e5efa2adcc9d",name:this.currentTab}))}};(function(t,i,e,a){var s,n=arguments.length,c=n<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,e,a);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(i,e,c):s(i,e))||c);n>3&&c&&Object.defineProperty(i,e,c)})([u()],S.prototype,"t",void 0),S.style=":host {\n  line-height: initial;\n  font-family: var(--dyte-font-family, sans-serif);\n\n  font-feature-settings: normal;\n  font-variation-settings: normal;\n}\n\np {\n  margin: var(--dyte-space-0, 0px);\n  padding: var(--dyte-space-0, 0px);\n}\n\n\n:host {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  font-family: var(--dyte-font-family, sans-serif);\n  z-index: 50;\n  display: flex;\n  flex-direction: column;\n\n  container-type: size;\n  container-name: sidebarui;\n}\n\n@container sidebarui (height < 370px) {\n  .main-header {\n    height: var(--dyte-space-8, 32px) !important;\n  }\n  .close {\n    top: var(--dyte-space-0\\.5, 2px) !important;\n    left: var(--dyte-space-0, 0px) !important;\n    color: rgba(var(--dyte-colors-danger, 255 45 45) / 0.6);\n  }\n}\n\n:host([view='sidebar']) {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));\n}\n\n:host([view='full-screen']) {\n  position: absolute;\n  top: var(--dyte-space-0, 0px);\n  right: var(--dyte-space-0, 0px);\n  bottom: var(--dyte-space-0, 0px);\n  left: var(--dyte-space-0, 0px);\n  max-width: 100%;\n  border: none;\n}\n\n::slotted(*) {\n  flex-grow: 1;\n}\n\n.close {\n  position: absolute;\n  top: var(--dyte-space-2, 8px);\n  left: var(--dyte-space-2, 8px);\n  z-index: 10;\n}\n\n.main-header {\n  position: relative;\n  display: flex;\n  height: var(--dyte-space-12, 48px);\n  place-items: center;\n  justify-content: center;\n}\n\n.main-header, \n.mobile-tabs {\n  flex-shrink: 0;\n}\n\n.mobile-tabs {\n  display: flex;\n  place-items: center;\n  justify-content: space-evenly;\n  border-bottom: 1px solid rgb(var(--dyte-colors-background-700, 44 44 44));\n}\n\n.mobile-tabs button {\n  margin: var(--dyte-space-0, 0px);\n  border-width: var(--dyte-border-width-none, 0);\n  border-style: none;\n  background-color: transparent;\n  padding: var(--dyte-space-0, 0px);\n  color: rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));\n  height: var(--dyte-space-10, 40px);\n  cursor: pointer;\n  padding-left: var(--dyte-space-4, 16px);\n  padding-right: var(--dyte-space-4, 16px);\n  font-weight: 500;\n  border-bottom: 1px solid transparent;\n}\n\n.mobile-tabs button.active {\n  --tw-border-opacity: 1;\n  border-color: rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));\n  --tw-text-opacity: 1;\n  color: rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));\n}\n\nheader h3 {\n  font-size: 14px;\n  font-weight: 500;\n}\n\n@media only screen and (max-device-height: 480px) and (orientation: landscape) {\n  .main-header {\n    display: none !important;\n  }\n}\n\n.tab-participant-count-badge {\n  display: inline-block;\n  padding: 2px 5px;\n  border-radius: 9999px;\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));\n  font-size: 12px;\n  color: rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));\n}\n\n.tab-participant-count-badge:not(.selected-tab) {\n  --tw-bg-opacity: 1;\n  background-color: rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));\n}\n\n.tab-participant-count-badge.requests-pending{\n  background-color: rgba(var(--dyte-colors-danger));\n}";export{x as dyte_participant,k as dyte_participants_stage_list,C as dyte_participants_stage_queue,O as dyte_participants_viewer_list,E as dyte_participants_waiting_list,S as dyte_sidebar_ui}